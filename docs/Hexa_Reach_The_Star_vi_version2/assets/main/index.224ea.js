window.__require=function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<i.length;a++)r(i[a]);return r}({Analytics:[function(e,t,n){"use strict";var i,r,o;cc._RF.push(t,"d13215oycVKmorbLyucrEOO","Analytics"),Object.defineProperty(n,"__esModule",{value:!0}),n.EGAAdType=n.EGAAdError=n.EGAAdAction=void 0,function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(i=n.EGAAdAction||(n.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(r=n.EGAAdError||(n.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(o=n.EGAAdType||(n.EGAAdType={})),n.default={EGAAdAction:i,EGAAdError:r,EGAAdType:o},cc._RF.pop()},{}],AudioController:[function(e,t,n){"use strict";cc._RF.push(t,"24de3UBY91KoaNplMZW8Lxw","AudioController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicState=!0,t.vfxState=!0,t.gameScene=null,t.sprite=[],t}return r(t,e),t.prototype.start=function(){},t.prototype.onClickVfxBtn=function(){this.vfxState=!this.vfxState,this.vfxState?this.getComponent(cc.Sprite).spriteFrame=this.sprite[1]:this.getComponent(cc.Sprite).spriteFrame=this.sprite[0]},o([c(cc.SpriteFrame)],t.prototype,"sprite",void 0),o([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],CanvasController:[function(e,t,n){"use strict";cc._RF.push(t,"47a8dl1bOhPP5vH6mWtcG+M","CanvasController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Canvas=null,t.boardNode=null,t.oldCanvasHeight=0,t.oldCanvasWidth=0,t}return r(t,e),t.prototype.onLoad=function(){this.oldCanvasHeight=cc.view.getCanvasSize().height,this.oldCanvasWidth=cc.view.getCanvasSize().width,this.ratio=cc.view.getCanvasSize().height/cc.view.getCanvasSize().width},t.prototype.start=function(){},t.prototype.update=function(){this.ratio<cc.view.getCanvasSize().height/cc.view.getCanvasSize().width?(console.log("screen expand vertically"),this.Canvas.fitHeight=!0,this.oldCanvasHeight=cc.view.getCanvasSize().height,this.oldCanvasWidth=cc.view.getCanvasSize().width,this.ratio=this.oldCanvasHeight/this.oldCanvasWidth):this.ratio>cc.view.getCanvasSize().height/cc.view.getCanvasSize().width&&(console.log("screen expand horizontally"),this.oldCanvasHeight=cc.view.getCanvasSize().height,this.oldCanvasWidth=cc.view.getCanvasSize().width,this.Canvas.fitWidth=!0,this.ratio=this.oldCanvasHeight/this.oldCanvasWidth)},o([c(cc.Canvas)],t.prototype,"Canvas",void 0),o([c(cc.Node)],t.prototype,"boardNode",void 0),o([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],CombineAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"f51cfn/vkxHRIW9tfsdmnlS","CombineAnimation");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.movingNode=[],t.destinationNodeIndex=[],t.destinationNode=[],t}return r(t,e),o([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],1:[function(e,t){(function(e){"use strict";var n,i,r,o,a=a||function(e){var t={},n=t.lib={},i=function(){},r=n.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;r<e;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),a=t.enc={},s=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new o.init(n,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new o.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,a=this.blockSize,s=r/(4*a);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,r=e.min(4*t,r),t){for(var c=0;c<t;c+=a)this._doProcessBlock(i,c);c=i.splice(0,t),n.sigBytes-=r}return new o.init(c,r)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=t.algo={};return t}(Math);(function(e){for(var t=a,n=(r=t.lib).WordArray,i=r.Hasher,r=t.algo,o=[],s=[],c=function(e){return 4294967296*(e-(0|e))|0},l=2,u=0;64>u;){var d;e:{d=l;for(var f=e.sqrt(d),p=2;p<=f;p++)if(!(d%p)){d=!1;break e}d=!0}d&&(8>u&&(o[u]=c(e.pow(l,.5))),s[u]=c(e.pow(l,1/3)),u++),l++}var g=[];r=r.SHA256=i.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],c=n[4],l=n[5],u=n[6],d=n[7],f=0;64>f;f++){if(16>f)g[f]=0|e[t+f];else{var p=g[f-15],v=g[f-2];g[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+g[f-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+g[f-16]}p=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&u)+s[f]+g[f],v=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&r^i&o^r&o),d=u,u=l,l=c,c=a+p|0,a=o,o=r,r=i,i=p+v|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=i._createHelper(r),t.HmacSHA256=i._createHmacHelper(r)})(Math),i=(n=a).enc.Utf8,n.algo.HMAC=n.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),function(){var e=a,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var r=0;r<n;r+=3)for(var o=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;4>a&&r+.75*a<n;a++)e.push(i.charAt(o>>>6*(3-a)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,i=this._map;(r=i.charAt(64))&&-1!=(r=e.indexOf(r))&&(n=r);for(var r=[],o=0,a=0;a<n;a++)if(a%4){var s=i.indexOf(e.charAt(a-1))<<a%4*2,c=i.indexOf(e.charAt(a))>>>6-a%4*2;r[o>>>2]|=(s|c)<<24-o%4*8,o++}return t.create(r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"})(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(e.EGAAdAction||(e.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(e.EGAAdError||(e.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(e.EGAAdType||(e.EGAAdType={})),function(e){(function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok",e[e.Created=10]="Created"})(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={})),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.EventValidation=1]="EventValidation",e[e.Database=2]="Database",e[e.Init=3]="Init",e[e.Http=4]="Http",e[e.Json=5]="Json"})(e.EGASdkErrorCategory||(e.EGASdkErrorCategory={})),function(e){e[e.Undefined=0]="Undefined",e[e.BusinessEvent=1]="BusinessEvent",e[e.ResourceEvent=2]="ResourceEvent",e[e.ProgressionEvent=3]="ProgressionEvent",e[e.DesignEvent=4]="DesignEvent",e[e.ErrorEvent=5]="ErrorEvent",e[e.InitHttp=9]="InitHttp",e[e.EventsHttp=10]="EventsHttp",e[e.ProcessEvents=11]="ProcessEvents",e[e.AddEventsToStore=12]="AddEventsToStore",e[e.AdEvent=20]="AdEvent"}(e.EGASdkErrorArea||(e.EGASdkErrorArea={})),function(e){e[e.Undefined=0]="Undefined",e[e.InvalidCurrency=1]="InvalidCurrency",e[e.InvalidShortString=2]="InvalidShortString",e[e.InvalidEventPartLength=3]="InvalidEventPartLength",e[e.InvalidEventPartCharacters=4]="InvalidEventPartCharacters",e[e.InvalidStore=5]="InvalidStore",e[e.InvalidFlowType=6]="InvalidFlowType",e[e.StringEmptyOrNull=7]="StringEmptyOrNull",e[e.NotFoundInAvailableCurrencies=8]="NotFoundInAvailableCurrencies",e[e.InvalidAmount=9]="InvalidAmount",e[e.NotFoundInAvailableItemTypes=10]="NotFoundInAvailableItemTypes",e[e.WrongProgressionOrder=11]="WrongProgressionOrder",e[e.InvalidEventIdLength=12]="InvalidEventIdLength",e[e.InvalidEventIdCharacters=13]="InvalidEventIdCharacters",e[e.InvalidProgressionStatus=15]="InvalidProgressionStatus",e[e.InvalidSeverity=16]="InvalidSeverity",e[e.InvalidLongString=17]="InvalidLongString",e[e.DatabaseTooLarge=18]="DatabaseTooLarge",e[e.DatabaseOpenOrCreate=19]="DatabaseOpenOrCreate",e[e.JsonError=25]="JsonError",e[e.FailHttpJsonDecode=29]="FailHttpJsonDecode",e[e.FailHttpJsonEncode=30]="FailHttpJsonEncode",e[e.InvalidAdAction=31]="InvalidAdAction",e[e.InvalidAdType=32]="InvalidAdType",e[e.InvalidString=33]="InvalidString"}(e.EGASdkErrorAction||(e.EGASdkErrorAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Currency=1]="Currency",e[e.CartType=2]="CartType",e[e.ItemType=3]="ItemType",e[e.ItemId=4]="ItemId",e[e.Store=5]="Store",e[e.FlowType=6]="FlowType",e[e.Amount=7]="Amount",e[e.Progression01=8]="Progression01",e[e.Progression02=9]="Progression02",e[e.Progression03=10]="Progression03",e[e.EventId=11]="EventId",e[e.ProgressionStatus=12]="ProgressionStatus",e[e.Severity=13]="Severity",e[e.Message=14]="Message",e[e.AdAction=15]="AdAction",e[e.AdType=16]="AdType",e[e.AdSdkName=17]="AdSdkName",e[e.AdPlacement=18]="AdPlacement"}(e.EGASdkErrorParameter||(e.EGASdkErrorParameter={}))}(e.events||(e.events={}))}(o||(o={})),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"})(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(e.EGAAdAction||(e.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(e.EGAAdError||(e.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(e.EGAAdType||(e.EGAAdType={}))}(r||(r={})),function(e){(function(e){var t;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"})(t||(t={}));var n=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(t){e.instance.infoLogEnabled=t},e.setVerboseLog=function(t){e.instance.infoLogVerboseEnabled=t},e.i=function(n){if(e.instance.infoLogEnabled){var i="Info/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Info)}},e.w=function(n){var i="Warning/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Warning)},e.e=function(n){var i="Error/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Error)},e.ii=function(n){if(e.instance.infoLogVerboseEnabled){var i="Verbose/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Info)}},e.d=function(n){if(e.debugEnabled){var i="Debug/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Debug)}},e.prototype.sendNotificationMessage=function(e,n){switch(n){case t.Error:console.error(e);break;case t.Warning:console.warn(e);break;case t.Debug:"function"==typeof console.debug?console.debug(e):console.log(e);break;case t.Info:console.log(e)}},e.instance=new e,e.Tag="GameAnalytics",e}();e.GALogger=n})(e.logging||(e.logging={}))}(o||(o={})),function(e){(function(t){var n=e.logging.GALogger,i=function(){function e(){}return e.getHmac=function(e,t){var n=a.HmacSHA256(t,e);return a.enc.Base64.stringify(n)},e.stringMatch=function(e,t){return!(!e||!t)&&t.test(e)},e.joinStringArray=function(e,t){for(var n="",i=0,r=e.length;i<r;i++)i>0&&(n+=t),n+=e[i];return n},e.stringArrayContainsString=function(e,t){if(0===e.length)return!1;for(var n in e)if(e[n]===t)return!0;return!1},e.encode64=function(t){t=encodeURI(t);var n,i,r,o,a,s="",c=0,l=0,u=0;do{r=(n=t.charCodeAt(u++))>>2,o=(3&n)<<4|(i=t.charCodeAt(u++))>>4,a=(15&i)<<2|(c=t.charCodeAt(u++))>>6,l=63&c,isNaN(i)?a=l=64:isNaN(c)&&(l=64),s=s+e.keyStr.charAt(r)+e.keyStr.charAt(o)+e.keyStr.charAt(a)+e.keyStr.charAt(l),n=i=c=0,r=o=a=l=0}while(u<t.length);return s},e.decode64=function(t){var i,r,o,a,s="",c=0,l=0,u=0;/[^A-Za-z0-9\+\/\=]/g.exec(t)&&n.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{i=e.keyStr.indexOf(t.charAt(u++))<<2|(o=e.keyStr.indexOf(t.charAt(u++)))>>4,r=(15&o)<<4|(a=e.keyStr.indexOf(t.charAt(u++)))>>2,c=(3&a)<<6|(l=e.keyStr.indexOf(t.charAt(u++))),s+=String.fromCharCode(i),64!=a&&(s+=String.fromCharCode(r)),64!=l&&(s+=String.fromCharCode(c)),i=r=c=0,o=a=l=0}while(u<t.length);return decodeURI(s)},e.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},e.createGuid=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)})},e.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();t.GAUtilities=i})(e.utilities||(e.utilities={}))}(o||(o={})),function(e){(function(t){var n=e.logging.GALogger,i=e.utilities.GAUtilities,r=e.events.EGASdkErrorCategory,o=e.events.EGASdkErrorArea,a=e.events.EGASdkErrorAction,s=e.events.EGASdkErrorParameter,c=function(e,t,n,i,r){this.category=e,this.area=t,this.action=n,this.parameter=i,this.reason=r};t.ValidationResult=c;var l=function(){function t(){}return t.validateBusinessEvent=function(e,i,l,u,d){return t.validateCurrency(e)?i<0?(n.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+i),new c(r.EventValidation,o.BusinessEvent,a.InvalidAmount,s.Amount,i+"")):t.validateShortString(l,!0)?t.validateEventPartLength(u,!1)?t.validateEventPartCharacters(u)?t.validateEventPartLength(d,!1)?t.validateEventPartCharacters(d)?null:(n.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+d),new c(r.EventValidation,o.BusinessEvent,a.InvalidEventPartCharacters,s.ItemId,d)):(n.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+d),new c(r.EventValidation,o.BusinessEvent,a.InvalidEventPartLength,s.ItemId,d)):(n.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),new c(r.EventValidation,o.BusinessEvent,a.InvalidEventPartCharacters,s.ItemType,u)):(n.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+u),new c(r.EventValidation,o.BusinessEvent,a.InvalidEventPartLength,s.ItemType,u)):(n.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+l),new c(r.EventValidation,o.BusinessEvent,a.InvalidShortString,s.CartType,l)):(n.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),new c(r.EventValidation,o.BusinessEvent,a.InvalidCurrency,s.Currency,e))},t.validateResourceEvent=function(l,u,d,f,p,g,v){return l==e.EGAResourceFlowType.Undefined?(n.w("Validation fail - resource event - flowType: Invalid flow type."),new c(r.EventValidation,o.ResourceEvent,a.InvalidFlowType,s.FlowType,"")):u?i.stringArrayContainsString(g,u)?d>0?f?t.validateEventPartLength(f,!1)?t.validateEventPartCharacters(f)?i.stringArrayContainsString(v,f)?t.validateEventPartLength(p,!1)?t.validateEventPartCharacters(p)?null:(n.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+p),new c(r.EventValidation,o.ResourceEvent,a.InvalidEventPartCharacters,s.ItemId,p)):(n.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+p),new c(r.EventValidation,o.ResourceEvent,a.InvalidEventPartLength,s.ItemId,p)):(n.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+f),new c(r.EventValidation,o.ResourceEvent,a.NotFoundInAvailableItemTypes,s.ItemType,f)):(n.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+f),new c(r.EventValidation,o.ResourceEvent,a.InvalidEventPartCharacters,s.ItemType,f)):(n.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+f),new c(r.EventValidation,o.ResourceEvent,a.InvalidEventPartLength,s.ItemType,f)):(n.w("Validation fail - resource event - itemType: Cannot be (null)"),new c(r.EventValidation,o.ResourceEvent,a.StringEmptyOrNull,s.ItemType,"")):(n.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+d),new c(r.EventValidation,o.ResourceEvent,a.InvalidAmount,s.Amount,d+"")):(n.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+u),new c(r.EventValidation,o.ResourceEvent,a.NotFoundInAvailableCurrencies,s.Currency,u)):(n.w("Validation fail - resource event - currency: Cannot be (null)"),new c(r.EventValidation,o.ResourceEvent,a.StringEmptyOrNull,s.Currency,""))},t.validateProgressionEvent=function(i,l,u,d){if(i==e.EGAProgressionStatus.Undefined)return n.w("Validation fail - progression event: Invalid progression status."),new c(r.EventValidation,o.ProgressionEvent,a.InvalidProgressionStatus,s.ProgressionStatus,"");if(d&&!u&&l)return n.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),new c(r.EventValidation,o.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,l+":"+u+":"+d);if(u&&!l)return n.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),new c(r.EventValidation,o.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,l+":"+u+":"+d);if(!l)return n.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),new c(r.EventValidation,o.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,(l||"")+":"+(u||"")+":"+(d||""));if(!t.validateEventPartLength(l,!1))return n.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+l),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartLength,s.Progression01,l);if(!t.validateEventPartCharacters(l))return n.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+l),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression01,l);if(u){if(!t.validateEventPartLength(u,!0))return n.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+u),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartLength,s.Progression02,u);if(!t.validateEventPartCharacters(u))return n.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression02,u)}if(d){if(!t.validateEventPartLength(d,!0))return n.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+d),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartLength,s.Progression03,d);if(!t.validateEventPartCharacters(d))return n.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+d),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression03,d)}return null},t.validateDesignEvent=function(e){return t.validateEventIdLength(e)?t.validateEventIdCharacters(e)?null:(n.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),new c(r.EventValidation,o.DesignEvent,a.InvalidEventIdCharacters,s.EventId,e)):(n.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 64 characters or less. String: "+e),new c(r.EventValidation,o.DesignEvent,a.InvalidEventIdLength,s.EventId,e))},t.validateErrorEvent=function(i,l){return i==e.EGAErrorSeverity.Undefined?(n.w("Validation fail - error event - severity: Severity was unsupported value."),new c(r.EventValidation,o.ErrorEvent,a.InvalidSeverity,s.Severity,"")):t.validateLongString(l,!0)?null:(n.w("Validation fail - error event - message: Message cannot be above 8192 characters."),new c(r.EventValidation,o.ErrorEvent,a.InvalidLongString,s.Message,l))},t.validateAdEvent=function(i,l,u,d){return i==e.EGAAdAction.Undefined?(n.w("Validation fail - error event - severity: Severity was unsupported value."),new c(r.EventValidation,o.AdEvent,a.InvalidAdAction,s.AdAction,"")):l==e.EGAAdType.Undefined?(n.w("Validation fail - ad event - adType: Ad type was unsupported value."),new c(r.EventValidation,o.AdEvent,a.InvalidAdType,s.AdType,"")):t.validateShortString(u,!1)?t.validateString(d,!1)?null:(n.w("Validation fail - ad event - message: Ad placement cannot be above 64 characters."),new c(r.EventValidation,o.AdEvent,a.InvalidString,s.AdPlacement,d)):(n.w("Validation fail - ad event - message: Ad SDK name cannot be above 32 characters."),new c(r.EventValidation,o.AdEvent,a.InvalidShortString,s.AdSdkName,u))},t.validateSdkErrorEvent=function(e,i,s,c,l){return!(!t.validateKeys(e,i)||(s===r.Undefined?(n.w("Validation fail - sdk error event - type: Category was unsupported value."),1):c===o.Undefined?(n.w("Validation fail - sdk error event - type: Area was unsupported value."),1):l===a.Undefined&&(n.w("Validation fail - sdk error event - type: Action was unsupported value."),1)))},t.validateKeys=function(e,t){return!(!i.stringMatch(e,/^[A-z0-9]{32}$/)||!i.stringMatch(t,/^[A-z0-9]{40}$/))},t.validateCurrency=function(e){return!!e&&!!i.stringMatch(e,/^[A-Z]{3}$/)},t.validateEventPartLength=function(e,t){return!(!t||e)||!!e&&!(e.length>64)},t.validateEventPartCharacters=function(e){return!!i.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},t.validateEventIdLength=function(e){return!!e&&!!i.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},t.validateEventIdCharacters=function(e){return!!e&&!!i.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},t.validateAndCleanInitRequestResponse=function(e,t){if(null==e)return n.w("validateInitRequestResponse failed - no response dictionary."),null;var i={};try{var r=e.server_ts;if(!(r>0))return n.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;i.server_ts=r}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+l),null}if(t){try{var o=e.configs;i.configs=o}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'configs' field. type="+typeof e.configs+", value="+e.configs+", "+l),null}try{var a=e.configs_hash;i.configs_hash=a}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'configs_hash' field. type="+typeof e.configs_hash+", value="+e.configs_hash+", "+l),null}try{var s=e.ab_id;i.ab_id=s}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'ab_id' field. type="+typeof e.ab_id+", value="+e.ab_id+", "+l),null}try{var c=e.ab_variant_id;i.ab_variant_id=c}catch(l){return n.w("validateInitRequestResponse failed - invalid type in 'ab_variant_id' field. type="+typeof e.ab_variant_id+", value="+e.ab_variant_id+", "+l),null}}return i},t.validateBuild=function(e){return!!t.validateShortString(e,!1)},t.validateSdkWrapperVersion=function(e){return!!i.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot|flutter) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},t.validateEngineVersion=function(e){return!(!e||!i.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},t.validateUserId=function(e){return!!t.validateString(e,!1)||(n.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},t.validateShortString=function(e,t){return!(!t||e)||!(!e||e.length>32)},t.validateString=function(e,t){return!(!t||e)||!(!e||e.length>64)},t.validateLongString=function(e,t){return!(!t||e)||!(!e||e.length>8192)},t.validateConnectionType=function(e){return i.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},t.validateCustomDimensions=function(e){return t.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},t.validateResourceCurrencies=function(e){if(!t.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var r=0;r<e.length;++r)if(!i.stringMatch(e[r],/^[A-Za-z]+$/))return n.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[r]),!1;return!0},t.validateResourceItemTypes=function(e){if(!t.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var i=0;i<e.length;++i)if(!t.validateEventPartCharacters(e[i]))return n.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[i]),!1;return!0},t.validateDimension01=function(e,t){return!e||!!i.stringArrayContainsString(t,e)},t.validateDimension02=function(e,t){return!e||!!i.stringArrayContainsString(t,e)},t.validateDimension03=function(e,t){return!e||!!i.stringArrayContainsString(t,e)},t.validateArrayOfStrings=function(e,t,i,r,o){var a=r;if(a||(a="Array"),!o)return n.w(a+" validation failed: array cannot be null. "),!1;if(0==i&&0==o.length)return n.w(a+" validation failed: array cannot be empty. "),!1;if(e>0&&o.length>e)return n.w(a+" validation failed: array cannot exceed "+e+" values. It has "+o.length+" values."),!1;for(var s=0;s<o.length;++s){var c=o[s]?o[s].length:0;if(0===c)return n.w(a+" validation failed: contained an empty string. Array="+JSON.stringify(o)),!1;if(t>0&&c>t)return n.w(a+" validation failed: a string exceeded max allowed length (which is: "+t+"). String was: "+o[s]),!1}return!0},t.validateClientTs=function(e){return!(e<0||e>99999999999)},t}();t.GAValidator=l})(e.validators||(e.validators={}))}(o||(o={})),function(e){(function(e){var t=function(e,t,n){this.name=e,this.value=t,this.version=n};e.NameValueVersion=t;var n=function(e,t){this.name=e,this.version=t};e.NameVersion=n;var i=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?e.connectionType="wwan":e.connectionType="lan":e.connectionType="offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var t,n=navigator.userAgent,i=n.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==i.length&&"ios"===e.buildPlatform)return"webkit_"+e.osVersion;if(/trident/i.test(i[1]))return"IE "+((t=/\brv[ :]+(\d+)/g.exec(n)||[])[1]||"");if("Chrome"===i[1]&&null!=(t=n.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return t.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(i[1]&&"fbav"===i[1].toLowerCase()&&(i[1]="facebook",i[2]))return"facebook "+i[2];var r=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(t=n.match(/version\/(\d+)/i))&&r.splice(1,1,t[1]),r.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,t){var i,r,o,a,s=new n("unknown","0.0.0"),c=0,l=0;for(c=0;c<t.length;c+=1)if(new RegExp(t[c].value,"i").test(e)){if(i=new RegExp(t[c].version+"[- /:;]([\\d._]+)","i"),a="",(r=e.match(i))&&r[1]&&(o=r[1]),o){var u=o.split(/[._]+/);for(l=0;l<Math.min(u.length,3);l+=1)a+=u[l]+(l<Math.min(u.length,3)-1?".":"")}else a="0.0.0";return s.name=t[c].name,s.version=a,s}return s},e.sdkWrapperVersion="javascript 4.4.5",e.osVersionPair=e.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new t("windows_phone","Windows Phone","OS"),new t("windows","Win","NT"),new t("ios","iPhone","OS"),new t("ios","iPad","OS"),new t("ios","iPod","OS"),new t("android","Android","Android"),new t("blackBerry","BlackBerry","/"),new t("mac_osx","Mac","OS X"),new t("tizen","Tizen","Tizen"),new t("linux","Linux","rv"),new t("kai_os","KAIOS","KAIOS")]),e.buildPlatform=e.runtimePlatformToString(),e.deviceModel=e.getDeviceModel(),e.deviceManufacturer=e.getDeviceManufacturer(),e.osVersion=e.getOSVersionString(),e.browserVersion=e.getBrowserVersionString(),e}();e.GADevice=i})(e.device||(e.device={}))}(o||(o={})),function(e){(function(e){var t=function(){function e(t){this.deadline=t,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e.idCounter=0,e}();e.TimedBlock=t})(e.threading||(e.threading={}))}(o||(o={})),function(e){(function(e){var t=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,t){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(t)},e.prototype.addQueueOfPriority=function(e){var t=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,n){return t.comparer.compare(e,n)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return this._sortedKeys.length>0},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],t=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),t},e}();e.PriorityQueue=t})(e.threading||(e.threading={}))}(o||(o={})),function(e){(function(t){var n,i,r=e.logging.GALogger;(function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"})(n=t.EGAStoreArgsOperator||(t.EGAStoreArgsOperator={})),function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(i=t.EGAStore||(t.EGAStore={}));var o=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),e.storageAvailable=!0):e.storageAvailable=!1}catch(t){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(t,i,r,o){void 0===i&&(i=[]),void 0===r&&(r=!1),void 0===o&&(o=0);var a=e.getStore(t);if(!a)return null;for(var s=[],c=0;c<a.length;++c){for(var l=a[c],u=!0,d=0;d<i.length;++d){var f=i[d];if(l[f[0]])switch(f[1]){case n.Equal:u=l[f[0]]==f[2];break;case n.LessOrEqual:u=l[f[0]]<=f[2];break;case n.NotEqual:u=l[f[0]]!=f[2];break;default:u=!1}else u=!1;if(!u)break}u&&s.push(l)}return r&&s.sort(function(e,t){return e.client_ts-t.client_ts}),o>0&&s.length>o&&(s=s.slice(0,o+1)),s},e.update=function(t,i,r){void 0===r&&(r=[]);var o=e.getStore(t);if(!o)return!1;for(var a=0;a<o.length;++a){for(var s=o[a],c=!0,l=0;l<r.length;++l){var u=r[l];if(s[u[0]])switch(u[1]){case n.Equal:c=s[u[0]]==u[2];break;case n.LessOrEqual:c=s[u[0]]<=u[2];break;case n.NotEqual:c=s[u[0]]!=u[2];break;default:c=!1}else c=!1;if(!c)break}if(c)for(l=0;l<i.length;++l){var d=i[l];s[d[0]]=d[1]}}return!0},e.delete=function(t,i){var r=e.getStore(t);if(r)for(var o=0;o<r.length;++o){for(var a=r[o],s=!0,c=0;c<i.length;++c){var l=i[c];if(a[l[0]])switch(l[1]){case n.Equal:s=a[l[0]]==l[2];break;case n.LessOrEqual:s=a[l[0]]<=l[2];break;case n.NotEqual:s=a[l[0]]!=l[2];break;default:s=!1}else s=!1;if(!s)break}s&&(r.splice(o,1),--o)}},e.insert=function(t,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=null);var o=e.getStore(t);if(o)if(i){if(!r)return;for(var a=!1,s=0;s<o.length;++s){var c=o[s];if(c[r]==n[r]){for(var l in n)c[l]=n[l];a=!0;break}}a||o.push(n)}else o.push(n)},e.save=function(t){e.isStorageAvailable()?(localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.EventsStoreKey),JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.SessionsStoreKey),JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.ProgressionStoreKey),JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.ItemsStoreKey),JSON.stringify(e.instance.storeItems))):r.w("Storage is not available, cannot save.")},e.load=function(t){if(e.isStorageAvailable()){try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.EventsStoreKey))),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(n){r.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.SessionsStoreKey))),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(n){r.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.ProgressionStoreKey))),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(n){r.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.ItemsStoreKey))),e.instance.storeItems||(e.instance.storeItems={})}catch(n){r.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}}else r.w("Storage is not available, cannot load.")},e.setItem=function(t,n,i){var r=e.StringFormat(e.KeyFormat,t,n);i?e.instance.storeItems[r]=i:r in e.instance.storeItems&&delete e.instance.storeItems[r]},e.getItem=function(t,n){var i=e.StringFormat(e.KeyFormat,t,n);return i in e.instance.storeItems?e.instance.storeItems[i]:null},e.getStore=function(t){switch(t){case i.Events:return e.instance.eventsStore;case i.Sessions:return e.instance.sessionsStore;case i.Progression:return e.instance.progressionStore;default:return r.w("GAStore.getStore(): Cannot find store: "+t),null}},e.instance=new e,e.MaxNumberOfEntries=2e3,e.StringFormat=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/{(\d+)}/g,function(e,n){return t[n]||""})},e.KeyFormat="GA::{0}::{1}",e.EventsStoreKey="ga_event",e.SessionsStoreKey="ga_session",e.ProgressionStoreKey="ga_progression",e.ItemsStoreKey="ga_items",e}();t.GAStore=o})(e.store||(e.store={}))}(o||(o={})),function(e){(function(t){var n=e.validators.GAValidator,i=e.utilities.GAUtilities,r=e.logging.GALogger,o=e.store.GAStore,a=e.device.GADevice,s=e.store.EGAStore,c=e.store.EGAStoreArgsOperator,l=function(){function e(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.currentGlobalCustomEventFields={},this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.remoteConfigsListeners=[],this.beforeUnloadListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0,this.isUnloading=!1}return e.setUserId=function(t){e.instance.userId=t,e.cacheIdentifier()},e.getIdentifier=function(){return e.instance.identifier},e.isInitialized=function(){return e.instance.initialized},e.setInitialized=function(t){e.instance.initialized=t},e.getSessionStart=function(){return e.instance.sessionStart},e.getSessionNum=function(){return e.instance.sessionNum},e.getTransactionNum=function(){return e.instance.transactionNum},e.getSessionId=function(){return e.instance.sessionId},e.getCurrentCustomDimension01=function(){return e.instance.currentCustomDimension01},e.getCurrentCustomDimension02=function(){return e.instance.currentCustomDimension02},e.getCurrentCustomDimension03=function(){return e.instance.currentCustomDimension03},e.getGameKey=function(){return e.instance.gameKey},e.getGameSecret=function(){return e.instance.gameSecret},e.getAvailableCustomDimensions01=function(){return e.instance.availableCustomDimensions01},e.setAvailableCustomDimensions01=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions01=t,e.validateAndFixCurrentDimensions(),r.i("Set available custom01 dimension values: ("+i.joinStringArray(t,", ")+")"))},e.getAvailableCustomDimensions02=function(){return e.instance.availableCustomDimensions02},e.setAvailableCustomDimensions02=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions02=t,e.validateAndFixCurrentDimensions(),r.i("Set available custom02 dimension values: ("+i.joinStringArray(t,", ")+")"))},e.getAvailableCustomDimensions03=function(){return e.instance.availableCustomDimensions03},e.setAvailableCustomDimensions03=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions03=t,e.validateAndFixCurrentDimensions(),r.i("Set available custom03 dimension values: ("+i.joinStringArray(t,", ")+")"))},e.getAvailableResourceCurrencies=function(){return e.instance.availableResourceCurrencies},e.setAvailableResourceCurrencies=function(t){n.validateResourceCurrencies(t)&&(e.instance.availableResourceCurrencies=t,r.i("Set available resource currencies: ("+i.joinStringArray(t,", ")+")"))},e.getAvailableResourceItemTypes=function(){return e.instance.availableResourceItemTypes},e.setAvailableResourceItemTypes=function(t){n.validateResourceItemTypes(t)&&(e.instance.availableResourceItemTypes=t,r.i("Set available resource item types: ("+i.joinStringArray(t,", ")+")"))},e.getBuild=function(){return e.instance.build},e.setBuild=function(t){e.instance.build=t,r.i("Set build version: "+t)},e.getUseManualSessionHandling=function(){return e.instance.useManualSessionHandling},e.isEventSubmissionEnabled=function(){return e.instance._isEventSubmissionEnabled},e.getABTestingId=function(){return e.instance.abId},e.getABTestingVariantId=function(){return e.instance.abVariantId},e.prototype.setDefaultId=function(t){this.defaultUserId=t||"",e.cacheIdentifier()},e.getDefaultId=function(){return e.instance.defaultUserId},e.getSdkConfig=function(){var t,n=0;for(var i in e.instance.sdkConfig)0===n&&(t=i),++n;if(t&&n>0)return e.instance.sdkConfig;for(var i in n=0,e.instance.sdkConfigCached)0===n&&(t=i),++n;return t&&n>0?e.instance.sdkConfigCached:e.instance.sdkConfigDefault},e.isEnabled=function(){return!!e.instance.initAuthorized},e.setCustomDimension01=function(t){e.instance.currentCustomDimension01=t,o.setItem(e.getGameKey(),e.Dimension01Key,t),r.i("Set custom01 dimension value: "+t)},e.setCustomDimension02=function(t){e.instance.currentCustomDimension02=t,o.setItem(e.getGameKey(),e.Dimension02Key,t),r.i("Set custom02 dimension value: "+t)},e.setCustomDimension03=function(t){e.instance.currentCustomDimension03=t,o.setItem(e.getGameKey(),e.Dimension03Key,t),r.i("Set custom03 dimension value: "+t)},e.incrementSessionNum=function(){var t=e.getSessionNum()+1;e.instance.sessionNum=t},e.incrementTransactionNum=function(){var t=e.getTransactionNum()+1;e.instance.transactionNum=t},e.incrementProgressionTries=function(t){var n=e.getProgressionTries(t)+1;e.instance.progressionTries[t]=n;var i={};i.progression=t,i.tries=n,o.insert(s.Progression,i,!0,"progression")},e.getProgressionTries=function(t){return t in e.instance.progressionTries?e.instance.progressionTries[t]:0},e.clearProgressionTries=function(t){t in e.instance.progressionTries&&delete e.instance.progressionTries[t];var n=[];n.push(["progression",c.Equal,t]),o.delete(s.Progression,n)},e.setKeys=function(t,n){e.instance.gameKey=t,e.instance.gameSecret=n},e.setManualSessionHandling=function(t){e.instance.useManualSessionHandling=t,r.i("Use manual session handling: "+t)},e.setEnabledEventSubmission=function(t){e.instance._isEventSubmissionEnabled=t},e.getEventAnnotations=function(){var t={v:2};t.event_uuid=i.createGuid(),t.user_id=e.instance.identifier,t.client_ts=e.getClientTsAdjusted(),t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.manufacturer=a.deviceManufacturer,t.device=a.deviceModel,t.browser_version=a.browserVersion,t.platform=a.buildPlatform,t.session_id=e.instance.sessionId,t[e.SessionNumKey]=e.instance.sessionNum;var r=a.getConnectionType();if(n.validateConnectionType(r)&&(t.connection_type=r),a.gameEngineVersion&&(t.engine_version=a.gameEngineVersion),e.instance.configurations){var o=0;for(var s in e.instance.configurations){o++;break}o>0&&(t.configurations=e.instance.configurations)}return e.instance.abId&&(t.ab_id=e.instance.abId),e.instance.abVariantId&&(t.ab_variant_id=e.instance.abVariantId),e.instance.build&&(t.build=e.instance.build),t},e.getSdkErrorEventAnnotations=function(){var t={v:2};t.event_uuid=i.createGuid(),t.category=e.CategorySdkError,t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.manufacturer=a.deviceManufacturer,t.device=a.deviceModel,t.platform=a.buildPlatform;var r=a.getConnectionType();return n.validateConnectionType(r)&&(t.connection_type=r),a.gameEngineVersion&&(t.engine_version=a.gameEngineVersion),t},e.getInitAnnotations=function(){var t={};return e.getIdentifier()||e.cacheIdentifier(),o.setItem(e.getGameKey(),e.LastUsedIdentifierKey,e.getIdentifier()),t.user_id=e.getIdentifier(),t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.platform=a.buildPlatform,e.getBuild()?t.build=e.getBuild():t.build=null,t.session_num=e.getSessionNum(),t.random_salt=e.getSessionNum(),t},e.getClientTsAdjusted=function(){var t=i.timeIntervalSince1970(),r=t+e.instance.clientServerTimeOffset;return n.validateClientTs(r)?r:t},e.sessionIsStarted=function(){return 0!=e.instance.sessionStart},e.cacheIdentifier=function(){e.instance.userId?e.instance.identifier=e.instance.userId:e.instance.defaultUserId&&(e.instance.identifier=e.instance.defaultUserId)},e.ensurePersistedStates=function(){o.isStorageAvailable()&&o.load(e.getGameKey());var t=e.instance;t.setDefaultId(null!=o.getItem(e.getGameKey(),e.DefaultUserIdKey)?o.getItem(e.getGameKey(),e.DefaultUserIdKey):i.createGuid()),t.sessionNum=null!=o.getItem(e.getGameKey(),e.SessionNumKey)?Number(o.getItem(e.getGameKey(),e.SessionNumKey)):0,t.transactionNum=null!=o.getItem(e.getGameKey(),e.TransactionNumKey)?Number(o.getItem(e.getGameKey(),e.TransactionNumKey)):0,t.currentCustomDimension01?o.setItem(e.getGameKey(),e.Dimension01Key,t.currentCustomDimension01):(t.currentCustomDimension01=null!=o.getItem(e.getGameKey(),e.Dimension01Key)?o.getItem(e.getGameKey(),e.Dimension01Key):"",t.currentCustomDimension01),t.currentCustomDimension02?o.setItem(e.getGameKey(),e.Dimension02Key,t.currentCustomDimension02):(t.currentCustomDimension02=null!=o.getItem(e.getGameKey(),e.Dimension02Key)?o.getItem(e.getGameKey(),e.Dimension02Key):"",t.currentCustomDimension02),t.currentCustomDimension03?o.setItem(e.getGameKey(),e.Dimension03Key,t.currentCustomDimension03):(t.currentCustomDimension03=null!=o.getItem(e.getGameKey(),e.Dimension03Key)?o.getItem(e.getGameKey(),e.Dimension03Key):"",t.currentCustomDimension03);var n=null!=o.getItem(e.getGameKey(),e.SdkConfigCachedKey)?o.getItem(e.getGameKey(),e.SdkConfigCachedKey):"";if(n){var a=JSON.parse(i.decode64(n));if(a){var c=o.getItem(e.getGameKey(),e.LastUsedIdentifierKey);null!=c&&c!=e.getIdentifier()&&(r.w("New identifier spotted compared to last one used, clearing cached configs hash!!"),a.configs_hash&&delete a.configs_hash),t.sdkConfigCached=a}}var l=e.getSdkConfig();t.configsHash=l.configs_hash?l.configs_hash:"",t.abId=l.ab_id?l.ab_id:"",t.abVariantId=l.ab_variant_id?l.ab_variant_id:"";var u=o.select(s.Progression);if(u)for(var d=0;d<u.length;++d){var f=u[d];f&&(t.progressionTries[f.progression]=f.tries)}},e.calculateServerTimeOffset=function(e){return e-i.timeIntervalSince1970()},e.formatString=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=new RegExp("\\{"+i+"\\}","gi");n=n.replace(r,arguments[i])}return n},e.validateAndCleanCustomFields=function(t,n){void 0===n&&(n=null);var o={};if(t){var a=0;for(var s in t){var c=t[s];if(s&&c)if(a<e.MAX_CUSTOM_FIELDS_COUNT){var l=new RegExp("^[a-zA-Z0-9_]{1,"+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(i.stringMatch(s,l)){var u=typeof c;if("string"===u||c instanceof String){var d=c;d.length<=e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&d.length>0?(o[s]=d,++a):(p="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its value is an empty string or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")",g=e.formatString(p,[s,c]),r.w(g),n&&n(p,g))}else if("number"===u||c instanceof Number){var f=c;o[s]=f,++a}else p="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its value is not a string or number",g=e.formatString(p,[s,c]),r.w(g),n&&n(p,g)}else p="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+")",g=e.formatString(p,[s,c]),r.w(g),n&&n(p,g)}else p="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because it exceeds the max number of custom fields ("+e.MAX_CUSTOM_FIELDS_COUNT+")",g=e.formatString(p,[s,c]),r.w(g),n&&n(p,g);else{var p="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its key or value is null",g=e.formatString(p,[s,c]);r.w(g),n&&n(p,g)}}}return o},e.validateAndFixCurrentDimensions=function(){n.validateDimension01(e.getCurrentCustomDimension01(),e.getAvailableCustomDimensions01())||e.setCustomDimension01(""),n.validateDimension02(e.getCurrentCustomDimension02(),e.getAvailableCustomDimensions02())||e.setCustomDimension02(""),n.validateDimension03(e.getCurrentCustomDimension03(),e.getAvailableCustomDimensions03())||e.setCustomDimension03("")},e.getConfigurationStringValue=function(t,n){return e.instance.configurations[t]?e.instance.configurations[t].toString():n},e.isRemoteConfigsReady=function(){return e.instance.remoteConfigsIsReady},e.addRemoteConfigsListener=function(t){e.instance.remoteConfigsListeners.indexOf(t)<0&&e.instance.remoteConfigsListeners.push(t)},e.removeRemoteConfigsListener=function(t){var n=e.instance.remoteConfigsListeners.indexOf(t);n>-1&&e.instance.remoteConfigsListeners.splice(n,1)},e.getRemoteConfigsContentAsString=function(){return JSON.stringify(e.instance.configurations)},e.populateConfigurations=function(t){var n=t.configs;if(n){e.instance.configurations={};for(var i=0;i<n.length;++i){var r=n[i];if(r){var o=r.key,a=r.value,s=r.start_ts?r.start_ts:Number.MIN_VALUE,c=r.end_ts?r.end_ts:Number.MAX_VALUE,l=e.getClientTsAdjusted();o&&a&&l>s&&l<c&&(e.instance.configurations[o]=a)}}}e.instance.remoteConfigsIsReady=!0;var u=e.instance.remoteConfigsListeners;for(i=0;i<u.length;++i)u[i]&&u[i].onRemoteConfigsUpdated()},e.addOnBeforeUnloadListener=function(t){e.instance.beforeUnloadListeners.indexOf(t)<0&&e.instance.beforeUnloadListeners.push(t)},e.removeOnBeforeUnloadListener=function(t){var n=e.instance.beforeUnloadListeners.indexOf(t);n>-1&&e.instance.beforeUnloadListeners.splice(n,1)},e.notifyBeforeUnloadListeners=function(){for(var t=e.instance.beforeUnloadListeners,n=0;n<t.length;++n)t[n]&&t[n].onBeforeUnload()},e.CategorySdkError="sdk_error",e.MAX_CUSTOM_FIELDS_COUNT=50,e.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,e.instance=new e,e.DefaultUserIdKey="default_user_id",e.SessionNumKey="session_num",e.TransactionNumKey="transaction_num",e.Dimension01Key="dimension01",e.Dimension02Key="dimension02",e.Dimension03Key="dimension03",e.SdkConfigCachedKey="sdk_config_cached",e.LastUsedIdentifierKey="last_used_identifier",e}();t.GAState=l})(e.state||(e.state={}))}(o||(o={})),function(e){(function(t){var n=e.utilities.GAUtilities,i=e.logging.GALogger,r=function(){function e(){}return e.execute=function(t,r,o,a){var s=new Date;if(e.timestampMap[r]||(e.timestampMap[r]=s),e.countMap[r]||(e.countMap[r]=0),(s.getTime()-e.timestampMap[r].getTime())/1e3>=3600&&(e.timestampMap[r]=s,e.countMap[r]=0),!(e.countMap[r]>=e.MaxCount)){var c=n.getHmac(a,o),l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){if(!l.responseText)return;if(200!=l.status)return void i.w("sdk error failed. response code not 200. status code: "+l.status+", description: "+l.statusText+", body: "+l.responseText);e.countMap[r]=e.countMap[r]+1}},l.open("POST",t,!0),l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("Authorization",c);try{l.send(o)}catch(u){console.error(u)}}},e.MaxCount=10,e.countMap={},e.timestampMap={},e}();t.SdkErrorTask=r})(e.tasks||(e.tasks={}))}(o||(o={})),function(e){(function(t){var n=e.state.GAState,i=e.logging.GALogger,r=e.utilities.GAUtilities,o=e.validators.GAValidator,a=e.tasks.SdkErrorTask,s=e.events.EGASdkErrorCategory,c=e.events.EGASdkErrorArea,l=e.events.EGASdkErrorAction,u=e.events.EGASdkErrorParameter,d=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.remoteConfigsVersion="v1",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.remoteConfigsBaseUrl=this.protocol+"://"+this.hostName+"/remote_configs/"+this.remoteConfigsVersion,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(i,r){var o=n.getGameKey(),a=this.remoteConfigsBaseUrl+"/"+this.initializeUrlPath+"?game_key="+o+"&interval_seconds=0&configs_hash="+i,s=n.getInitAnnotations(),c=JSON.stringify(s);if(c){var l=this.createPayloadData(c,this.useGzip),u=[];u.push(c),e.sendRequest(a,l,u,this.useGzip,e.initRequestCallback,r)}else r(t.EGAHTTPApiResponse.JsonEncodeFailed,null)},e.prototype.sendEventsInArray=function(i,r,o){if(0!=i.length){var a=n.getGameKey(),s=this.baseUrl+"/"+a+"/"+this.eventsUrlPath,c=JSON.stringify(i);if(c){var l=this.createPayloadData(c,this.useGzip),u=[];u.push(c),u.push(r),u.push(i.length.toString()),e.sendRequest(s,l,u,this.useGzip,e.sendEventInArrayRequestCallback,o)}else o(t.EGAHTTPApiResponse.JsonEncodeFailed,null,r,i.length)}},e.prototype.sendSdkErrorEvent=function(t,r,s,c,l,u,d){if(n.isEventSubmissionEnabled()&&o.validateSdkErrorEvent(u,d,t,r,s)){var f,p=this.baseUrl+"/"+u+"/"+this.eventsUrlPath,g="",v=n.getSdkErrorEventAnnotations(),m=e.sdkErrorCategoryString(t);v.error_category=m,g+=m;var h=e.sdkErrorAreaString(r);v.error_area=h,g+=":"+h;var y=e.sdkErrorActionString(s);v.error_action=y;var b=e.sdkErrorParameterString(c);if(b.length>0&&(v.error_parameter=b),l.length>0){var S=l;l.length>e.MAX_ERROR_MESSAGE_LENGTH&&(S=l.substring(0,e.MAX_ERROR_MESSAGE_LENGTH)),v.reason=S}var A=[];A.push(v),(f=JSON.stringify(A))?a.execute(p,g,f,d):i.w("sendSdkErrorEvent: JSON encoding failed.")}},e.sendEventInArrayRequestCallback=function(i,r,o,a){void 0===a&&(a=null),a[0],a[1];var d,f,p=a[2],g=parseInt(a[3]);d=i.responseText,f=i.status;var v=e.instance.processRequestResponse(f,i.statusText,d,"Events");if(v==t.EGAHTTPApiResponse.Ok||v==t.EGAHTTPApiResponse.Created||v==t.EGAHTTPApiResponse.BadRequest){var m=d?JSON.parse(d):{};if(null==m)return o(t.EGAHTTPApiResponse.JsonDecodeFailed,null,p,g),void e.instance.sendSdkErrorEvent(s.Http,c.EventsHttp,l.FailHttpJsonDecode,u.Undefined,d,n.getGameKey(),n.getGameSecret());t.EGAHTTPApiResponse.BadRequest,o(v,m,p,g)}else o(v,null,p,g)},e.sendRequest=function(e,t,i,o,a,s){var c=new XMLHttpRequest,l=n.getGameSecret(),u=r.getHmac(l,t),d=[];for(var f in d.push(u),i)d.push(i[f]);if(c.onreadystatechange=function(){4===c.readyState&&a(c,e,s,d)},c.open("POST",e,!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Authorization",u),o)throw new Error("gzip not supported");try{c.send(t)}catch(p){console.error(p.stack)}},e.initRequestCallback=function(i,r,a,d){var f,p;void 0===d&&(d=null),d[0],d[1],f=i.responseText,p=i.status;var g=f?JSON.parse(f):{},v=e.instance.processRequestResponse(p,i.statusText,f,"Init");if(v==t.EGAHTTPApiResponse.Ok||v==t.EGAHTTPApiResponse.Created||v==t.EGAHTTPApiResponse.BadRequest){if(null==g)return a(t.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0),void e.instance.sendSdkErrorEvent(s.Http,c.InitHttp,l.FailHttpJsonDecode,u.Undefined,f,n.getGameKey(),n.getGameSecret());if(v!==t.EGAHTTPApiResponse.BadRequest){var m=o.validateAndCleanInitRequestResponse(g,v===t.EGAHTTPApiResponse.Created);m?a(v,m,"",0):a(t.EGAHTTPApiResponse.BadResponse,null,"",0)}else a(v,null,"",0)}else a(v,null,"",0)},e.prototype.createPayloadData=function(e,t){if(t)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,n,i){return i?200===e?t.EGAHTTPApiResponse.Ok:201===e?t.EGAHTTPApiResponse.Created:0===e||401===e?t.EGAHTTPApiResponse.Unauthorized:400===e?t.EGAHTTPApiResponse.BadRequest:500===e?t.EGAHTTPApiResponse.InternalServerError:t.EGAHTTPApiResponse.UnknownResponseCode:t.EGAHTTPApiResponse.NoResponse},e.sdkErrorCategoryString=function(e){switch(e){case s.EventValidation:return"event_validation";case s.Database:return"db";case s.Init:return"init";case s.Http:return"http";case s.Json:return"json"}return""},e.sdkErrorAreaString=function(e){switch(e){case c.BusinessEvent:return"business";case c.ResourceEvent:return"resource";case c.ProgressionEvent:return"progression";case c.DesignEvent:return"design";case c.ErrorEvent:return"error";case c.InitHttp:return"init_http";case c.EventsHttp:return"events_http";case c.ProcessEvents:return"process_events";case c.AddEventsToStore:return"add_events_to_store"}return""},e.sdkErrorActionString=function(e){switch(e){case l.InvalidCurrency:return"invalid_currency";case l.InvalidShortString:return"invalid_short_string";case l.InvalidEventPartLength:return"invalid_event_part_length";case l.InvalidEventPartCharacters:return"invalid_event_part_characters";case l.InvalidStore:return"invalid_store";case l.InvalidFlowType:return"invalid_flow_type";case l.StringEmptyOrNull:return"string_empty_or_null";case l.NotFoundInAvailableCurrencies:return"not_found_in_available_currencies";case l.InvalidAmount:return"invalid_amount";case l.NotFoundInAvailableItemTypes:return"not_found_in_available_item_types";case l.WrongProgressionOrder:return"wrong_progression_order";case l.InvalidEventIdLength:return"invalid_event_id_length";case l.InvalidEventIdCharacters:return"invalid_event_id_characters";case l.InvalidProgressionStatus:return"invalid_progression_status";case l.InvalidSeverity:return"invalid_severity";case l.InvalidLongString:return"invalid_long_string";case l.DatabaseTooLarge:return"db_too_large";case l.DatabaseOpenOrCreate:return"db_open_or_create";case l.JsonError:return"json_error";case l.FailHttpJsonDecode:return"fail_http_json_decode";case l.FailHttpJsonEncode:return"fail_http_json_encode"}return""},e.sdkErrorParameterString=function(e){switch(e){case u.Currency:return"currency";case u.CartType:return"cart_type";case u.ItemType:return"item_type";case u.ItemId:return"item_id";case u.Store:return"store";case u.FlowType:return"flow_type";case u.Amount:return"amount";case u.Progression01:return"progression01";case u.Progression02:return"progression02";case u.Progression03:return"progression03";case u.EventId:return"event_id";case u.ProgressionStatus:return"progression_status";case u.Severity:return"severity";case u.Message:return"message"}return""},e.instance=new e,e.MAX_ERROR_MESSAGE_LENGTH=256,e}();t.GAHTTPApi=d})(e.http||(e.http={}))}(o||(o={})),function(e){var t,n,i,r,o,a,s,c,l,u,d;t=e.events||(e.events={}),n=e.store.GAStore,i=e.store.EGAStore,r=e.store.EGAStoreArgsOperator,o=e.state.GAState,a=e.logging.GALogger,s=e.utilities.GAUtilities,c=e.http.EGAHTTPApiResponse,l=e.http.GAHTTPApi,u=e.validators.GAValidator,d=function(){function d(){}return d.customEventFieldsErrorCallback=function(t,n){if(o.isEventSubmissionEnabled()){var i=new Date;d.timestampMap[t]||(d.timestampMap[t]=i),d.countMap[t]||(d.countMap[t]=0),(i.getTime()-d.timestampMap[t].getTime())/1e3>=3600&&(d.timestampMap[t]=i,d.countMap[t]=0),d.countMap[t]>=d.MAX_ERROR_COUNT||e.threading.GAThreading.performTaskOnGAThread(function(){d.addErrorEvent(e.EGAErrorSeverity.Warning,n,null,!0),d.countMap[t]=d.countMap[t]+1})}},d.addSessionStartEvent=function(){if(o.isEventSubmissionEnabled()){var e={};e.category=d.CategorySessionStart,o.incrementSessionNum(),n.setItem(o.getGameKey(),o.SessionNumKey,o.getSessionNum().toString()),d.addDimensionsToEvent(e);var t=o.instance.currentGlobalCustomEventFields;d.addCustomFieldsToEvent(e,o.validateAndCleanCustomFields(t,d.customEventFieldsErrorCallback)),d.addEventToStore(e),a.i("Add SESSION START event"),d.processEvents(d.CategorySessionStart,!1)}},d.addSessionEndEvent=function(){if(o.isEventSubmissionEnabled()){var e=o.getSessionStart(),t=o.getClientTsAdjusted()-e;t<0&&(a.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),t=0);var n={};n.category=d.CategorySessionEnd,n.length=t,d.addDimensionsToEvent(n);var i=o.instance.currentGlobalCustomEventFields;d.addCustomFieldsToEvent(n,o.validateAndCleanCustomFields(i,d.customEventFieldsErrorCallback)),d.addEventToStore(n),a.i("Add SESSION END event."),d.processEvents("",!1)}},d.addBusinessEvent=function(e,t,i,r,s,c,f){if(void 0===s&&(s=null),o.isEventSubmissionEnabled()){var p=u.validateBusinessEvent(e,t,s,i,r);if(null==p){var g={};o.incrementTransactionNum(),n.setItem(o.getGameKey(),o.TransactionNumKey,o.getTransactionNum().toString()),g.event_id=i+":"+r,g.category=d.CategoryBusiness,g.currency=e,g.amount=t,g[o.TransactionNumKey]=o.getTransactionNum(),s&&(g.cart_type=s),d.addDimensionsToEvent(g);var v={};if(c&&Object.keys(c).length>0)for(var m in c)v[m]=c[m];else for(var m in o.instance.currentGlobalCustomEventFields)v[m]=o.instance.currentGlobalCustomEventFields[m];if(f&&c&&Object.keys(c).length>0)for(var m in o.instance.currentGlobalCustomEventFields)v[m]||(v[m]=o.instance.currentGlobalCustomEventFields[m]);d.addCustomFieldsToEvent(g,o.validateAndCleanCustomFields(v,d.customEventFieldsErrorCallback)),a.i("Add BUSINESS event: {currency:"+e+", amount:"+t+", itemType:"+i+", itemId:"+r+", cartType:"+s+"}"),d.addEventToStore(g)}else l.instance.sendSdkErrorEvent(p.category,p.area,p.action,p.parameter,p.reason,o.getGameKey(),o.getGameSecret())}},d.addResourceEvent=function(t,n,i,r,s,c,f){if(o.isEventSubmissionEnabled()){var p=u.validateResourceEvent(t,n,i,r,s,o.getAvailableResourceCurrencies(),o.getAvailableResourceItemTypes());if(null==p){t===e.EGAResourceFlowType.Sink&&(i*=-1);var g={},v=d.resourceFlowTypeToString(t);g.event_id=v+":"+n+":"+r+":"+s,g.category=d.CategoryResource,g.amount=i,d.addDimensionsToEvent(g);var m={};if(c&&Object.keys(c).length>0)for(var h in c)m[h]=c[h];else for(var h in o.instance.currentGlobalCustomEventFields)m[h]=o.instance.currentGlobalCustomEventFields[h];if(f&&c&&Object.keys(c).length>0)for(var h in o.instance.currentGlobalCustomEventFields)m[h]||(m[h]=o.instance.currentGlobalCustomEventFields[h]);d.addCustomFieldsToEvent(g,o.validateAndCleanCustomFields(m,d.customEventFieldsErrorCallback)),a.i("Add RESOURCE event: {currency:"+n+", amount:"+i+", itemType:"+r+", itemId:"+s+"}"),d.addEventToStore(g)}else l.instance.sendSdkErrorEvent(p.category,p.area,p.action,p.parameter,p.reason,o.getGameKey(),o.getGameSecret())}},d.addProgressionEvent=function(t,n,i,r,s,c,f,p){if(o.isEventSubmissionEnabled()){var g=d.progressionStatusToString(t),v=u.validateProgressionEvent(t,n,i,r);if(null==v){var m,h={};m=i?r?n+":"+i+":"+r:n+":"+i:n,h.category=d.CategoryProgression,h.event_id=g+":"+m;var y=0;c&&t!=e.EGAProgressionStatus.Start&&(h.score=Math.round(s)),t===e.EGAProgressionStatus.Fail&&o.incrementProgressionTries(m),t===e.EGAProgressionStatus.Complete&&(o.incrementProgressionTries(m),y=o.getProgressionTries(m),h.attempt_num=y,o.clearProgressionTries(m)),d.addDimensionsToEvent(h);var b={};if(f&&Object.keys(f).length>0)for(var S in f)b[S]=f[S];else for(var S in o.instance.currentGlobalCustomEventFields)b[S]=o.instance.currentGlobalCustomEventFields[S];if(p&&f&&Object.keys(f).length>0)for(var S in o.instance.currentGlobalCustomEventFields)b[S]||(b[S]=o.instance.currentGlobalCustomEventFields[S]);d.addCustomFieldsToEvent(h,o.validateAndCleanCustomFields(b,d.customEventFieldsErrorCallback)),a.i("Add PROGRESSION event: {status:"+g+", progression01:"+n+", progression02:"+i+", progression03:"+r+", score:"+s+", attempt:"+y+"}"),d.addEventToStore(h)}else l.instance.sendSdkErrorEvent(v.category,v.area,v.action,v.parameter,v.reason,o.getGameKey(),o.getGameSecret())}},d.addDesignEvent=function(e,t,n,i,r){if(o.isEventSubmissionEnabled()){var s=u.validateDesignEvent(e);if(null==s){var c={};c.category=d.CategoryDesign,c.event_id=e,n&&(c.value=t),d.addDimensionsToEvent(c);var f={};if(i&&Object.keys(i).length>0)for(var p in i)f[p]=i[p];else for(var p in o.instance.currentGlobalCustomEventFields)f[p]=o.instance.currentGlobalCustomEventFields[p];if(r&&i&&Object.keys(i).length>0)for(var p in o.instance.currentGlobalCustomEventFields)f[p]||(f[p]=o.instance.currentGlobalCustomEventFields[p]);d.addCustomFieldsToEvent(c,o.validateAndCleanCustomFields(f,d.customEventFieldsErrorCallback)),a.i("Add DESIGN event: {eventId:"+e+", value:"+t+"}"),d.addEventToStore(c)}else l.instance.sendSdkErrorEvent(s.category,s.area,s.action,s.parameter,s.reason,o.getGameKey(),o.getGameSecret())}},d.addErrorEvent=function(e,t,n,i,r){if(void 0===r&&(r=!1),o.isEventSubmissionEnabled()){var s=d.errorSeverityToString(e),c=u.validateErrorEvent(e,t);if(null==c){var f={};if(f.category=d.CategoryError,f.severity=s,f.message=t,d.addDimensionsToEvent(f),!r){var p={};if(n&&Object.keys(n).length>0)for(var g in n)p[g]=n[g];else for(var g in o.instance.currentGlobalCustomEventFields)p[g]=o.instance.currentGlobalCustomEventFields[g];if(i&&n&&Object.keys(n).length>0)for(var g in o.instance.currentGlobalCustomEventFields)p[g]||(p[g]=o.instance.currentGlobalCustomEventFields[g]);d.addCustomFieldsToEvent(f,o.validateAndCleanCustomFields(p,d.customEventFieldsErrorCallback))}a.i("Add ERROR event: {severity:"+s+", message:"+t+"}"),d.addEventToStore(f)}else l.instance.sendSdkErrorEvent(c.category,c.area,c.action,c.parameter,c.reason,o.getGameKey(),o.getGameSecret())}},d.addAdEvent=function(t,n,i,r,s,c,f,p,g){if(o.isEventSubmissionEnabled()){var v=d.adActionToString(t),m=d.adTypeToString(n),h=d.adErrorToString(s),y=u.validateAdEvent(t,n,i,r);if(null==y){var b={};b.category=d.CategoryAds,b.ad_sdk_name=i,b.ad_placement=r,b.ad_type=m,b.ad_action=v,t==e.EGAAdAction.FailedShow&&h.length>0&&(b.ad_fail_show_reason=h),!f||n!=e.EGAAdType.RewardedVideo&&n!=e.EGAAdType.Video||(b.ad_duration=c),d.addDimensionsToEvent(b);var S={};if(p&&Object.keys(p).length>0)for(var A in p)S[A]=p[A];else for(var A in o.instance.currentGlobalCustomEventFields)S[A]=o.instance.currentGlobalCustomEventFields[A];if(g&&p&&Object.keys(p).length>0)for(var A in o.instance.currentGlobalCustomEventFields)S[A]||(S[A]=o.instance.currentGlobalCustomEventFields[A]);d.addCustomFieldsToEvent(b,o.validateAndCleanCustomFields(S,d.customEventFieldsErrorCallback)),a.i("Add AD event: {ad_sdk_name:"+i+", ad_placement:"+r+", ad_type:"+m+", ad_action:"+v+(t==e.EGAAdAction.FailedShow&&h.length>0?", ad_fail_show_reason:"+h:"")+(!f||n!=e.EGAAdType.RewardedVideo&&n!=e.EGAAdType.Video?"":", ad_duration:"+c)+"}"),d.addEventToStore(b)}else l.instance.sendSdkErrorEvent(y.category,y.area,y.action,y.parameter,y.reason,o.getGameKey(),o.getGameSecret())}},d.processEvents=function(e,c){if(o.isEventSubmissionEnabled())try{var f=s.createGuid();c&&(d.cleanupEvents(),d.fixMissingSessionEndEvents());var p=[];p.push(["status",r.Equal,"new"]);var g=[];g.push(["status",r.Equal,"new"]),e&&(p.push(["category",r.Equal,e]),g.push(["category",r.Equal,e]));var v=[];v.push(["status",f]);var m=n.select(i.Events,p);if(!m||0==m.length)return a.i("Event queue: No events to send"),void d.updateSessionStore();if(m.length>d.MaxEventCount){if(!(m=n.select(i.Events,p,!0,d.MaxEventCount)))return;var h=m[m.length-1].client_ts;if(p.push(["client_ts",r.LessOrEqual,h]),!(m=n.select(i.Events,p)))return;g.push(["client_ts",r.LessOrEqual,h])}if(a.i("Event queue: Sending "+m.length+" events."),!n.update(i.Events,v,g))return;for(var y=[],b=0;b<m.length;++b){var S=m[b],A=JSON.parse(s.decode64(S.event));if(0!=A.length){var E=A.client_ts;E&&!u.validateClientTs(E)&&delete A.client_ts,y.push(A)}}l.instance.sendEventsInArray(y,f,d.processEventsCallback)}catch(C){a.e("Error during ProcessEvents(): "+C.stack),l.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Json,t.EGASdkErrorArea.ProcessEvents,t.EGASdkErrorAction.JsonError,t.EGASdkErrorParameter.Undefined,C.stack,o.getGameKey(),o.getGameSecret())}},d.processEventsCallback=function(e,t,o,s){var l=[];if(l.push(["status",r.Equal,o]),e===c.Ok)n.delete(i.Events,l),a.i("Event queue: "+s+" events sent.");else if(e===c.NoResponse){var u=[];u.push(["status","new"]),a.w("Event queue: Failed to send events to collector - Retrying next time"),n.update(i.Events,u,l)}else{if(t){var d,f=0;for(var p in t)0==f&&(d=t[p]),++f;e===c.BadRequest&&d.constructor===Array?a.w("Event queue: "+s+" events sent. "+f+" events failed GA server validation."):a.w("Event queue: Failed to send events.")}else a.w("Event queue: Failed to send events.");n.delete(i.Events,l)}},d.cleanupEvents=function(){n.update(i.Events,[["status","new"]])},d.fixMissingSessionEndEvents=function(){if(o.isEventSubmissionEnabled()){var e=[];e.push(["session_id",r.NotEqual,o.getSessionId()]);var t=n.select(i.Sessions,e);if(t&&0!=t.length){a.i(t.length+" session(s) located with missing session_end event.");for(var c=0;c<t.length;++c){var l=JSON.parse(s.decode64(t[c].event)),u=l.client_ts-t[c].timestamp;u=Math.max(0,u),l.category=d.CategorySessionEnd,l.length=u,d.addEventToStore(l)}}}},d.addEventToStore=function(e){if(o.isEventSubmissionEnabled())if(o.isInitialized())try{if(n.isStoreTooLargeForEvents()&&!s.stringMatch(e.category,/^(user|session_end|business)$/))return a.w("Database too large. Event has been blocked."),void l.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Database,t.EGASdkErrorArea.AddEventsToStore,t.EGASdkErrorAction.DatabaseTooLarge,t.EGASdkErrorParameter.Undefined,"",o.getGameKey(),o.getGameSecret());var c=o.getEventAnnotations();for(var u in e)c[u]=e[u];var f=JSON.stringify(c);a.ii("Event added to queue: "+f);var p={status:"new"};p.category=c.category,p.session_id=c.session_id,p.client_ts=c.client_ts,p.event=s.encode64(JSON.stringify(c)),n.insert(i.Events,p),e.category==d.CategorySessionEnd?n.delete(i.Sessions,[["session_id",r.Equal,c.session_id]]):d.updateSessionStore(),n.isStorageAvailable()&&n.save(o.getGameKey())}catch(u){a.e("addEventToStore: error"),a.e(u.stack),l.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Database,t.EGASdkErrorArea.AddEventsToStore,t.EGASdkErrorAction.DatabaseTooLarge,t.EGASdkErrorParameter.Undefined,u.stack,o.getGameKey(),o.getGameSecret())}else a.w("Could not add event: SDK is not initialized")},d.updateSessionStore=function(){if(o.sessionIsStarted()){var e={};e.session_id=o.instance.sessionId,e.timestamp=o.getSessionStart();var t=o.getEventAnnotations();d.addDimensionsToEvent(t);var r=o.instance.currentGlobalCustomEventFields;d.addCustomFieldsToEvent(t,o.validateAndCleanCustomFields(r,d.customEventFieldsErrorCallback)),e.event=s.encode64(JSON.stringify(t)),n.insert(i.Sessions,e,!0,"session_id"),n.isStorageAvailable()&&n.save(o.getGameKey())}},d.addDimensionsToEvent=function(e){e&&(o.getCurrentCustomDimension01()&&(e.custom_01=o.getCurrentCustomDimension01()),o.getCurrentCustomDimension02()&&(e.custom_02=o.getCurrentCustomDimension02()),o.getCurrentCustomDimension03()&&(e.custom_03=o.getCurrentCustomDimension03()))},d.addCustomFieldsToEvent=function(e,t){e&&t&&Object.keys(t).length>0&&(e.custom_fields=t)},d.resourceFlowTypeToString=function(t){return t==e.EGAResourceFlowType.Source||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":t==e.EGAResourceFlowType.Sink||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},d.progressionStatusToString=function(t){return t==e.EGAProgressionStatus.Start||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":t==e.EGAProgressionStatus.Complete||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":t==e.EGAProgressionStatus.Fail||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},d.errorSeverityToString=function(t){return t==e.EGAErrorSeverity.Debug||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":t==e.EGAErrorSeverity.Info||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":t==e.EGAErrorSeverity.Warning||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":t==e.EGAErrorSeverity.Error||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":t==e.EGAErrorSeverity.Critical||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},d.adActionToString=function(t){return t==e.EGAAdAction.Clicked||t==e.EGAAdAction[e.EGAAdAction.Clicked]?"clicked":t==e.EGAAdAction.Show||t==e.EGAAdAction[e.EGAAdAction.Show]?"show":t==e.EGAAdAction.FailedShow||t==e.EGAAdAction[e.EGAAdAction.FailedShow]?"failed_show":t==e.EGAAdAction.RewardReceived||t==e.EGAAdAction[e.EGAAdAction.RewardReceived]?"reward_received":""},d.adErrorToString=function(t){return t==e.EGAAdError.Unknown||t==e.EGAAdError[e.EGAAdError.Unknown]?"unknown":t==e.EGAAdError.Offline||t==e.EGAAdError[e.EGAAdError.Offline]?"offline":t==e.EGAAdError.NoFill||t==e.EGAAdError[e.EGAAdError.NoFill]?"no_fill":t==e.EGAAdError.InternalError||t==e.EGAAdError[e.EGAAdError.InternalError]?"internal_error":t==e.EGAAdError.InvalidRequest||t==e.EGAAdError[e.EGAAdError.InvalidRequest]?"invalid_request":t==e.EGAAdError.UnableToPrecache||t==e.EGAAdError[e.EGAAdError.UnableToPrecache]?"unable_to_precache":""},d.adTypeToString=function(t){return t==e.EGAAdType.Video||t==e.EGAAdType[e.EGAAdType.Video]?"video":t==e.EGAAdType.RewardedVideo||t==e.EGAAdError[e.EGAAdType.RewardedVideo]?"rewarded_video":t==e.EGAAdType.Playable||t==e.EGAAdError[e.EGAAdType.Playable]?"playable":t==e.EGAAdType.Interstitial||t==e.EGAAdError[e.EGAAdType.Interstitial]?"interstitial":t==e.EGAAdType.OfferWall||t==e.EGAAdError[e.EGAAdType.OfferWall]?"offer_wall":t==e.EGAAdType.Banner||t==e.EGAAdError[e.EGAAdType.Banner]?"banner":""},d.CategorySessionStart="user",d.CategorySessionEnd="session_end",d.CategoryDesign="design",d.CategoryBusiness="business",d.CategoryProgression="progression",d.CategoryResource="resource",d.CategoryError="error",d.CategoryAds="ads",d.MaxEventCount=500,d.MAX_ERROR_COUNT=10,d.countMap={},d.timestampMap={},d}(),t.GAEvents=d}(o||(o={})),function(e){(function(t){var n=e.logging.GALogger,i=e.state.GAState,r=e.events.GAEvents,o=function(){function e(){this.blocks=new t.PriorityQueue({compare:function(e,t){return e-t}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var n=new Date;return n.setSeconds(n.getSeconds()+e),new t.TimedBlock(n)},e.performTaskOnGAThread=function(n,i){void 0===i&&(i=0);var r=new Date;r.setSeconds(r.getSeconds()+i);var o=new t.TimedBlock(r);o.block=n,e.instance.id2TimedBlockMap[o.id]=o,e.instance.addTimedBlock(o)},e.performTimedBlockOnGAThread=function(t){e.instance.id2TimedBlockMap[t.id]=t,e.instance.addTimedBlock(t)},e.scheduleTimer=function(n,i){var r=new Date;r.setSeconds(r.getSeconds()+n);var o=new t.TimedBlock(r);return o.block=i,e.instance.id2TimedBlockMap[o.id]=o,e.instance.addTimedBlock(o),o.id},e.getTimedBlockById=function(t){return t in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[t]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){i.isInitialized()&&(n.i("Ending session."),e.stopEventQueue(),i.isEnabled()&&i.sessionIsStarted()&&(r.addSessionEndEvent(),i.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(t){t in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[t].ignore=!0)},e.setEventProcessInterval=function(t){t>0&&(e.ProcessEventsIntervalInSeconds=t)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var t;t=e.getNextBlock();)if(!t.ignore)if(t.async){if(!t.running){t.running=!0,t.block();break}}else t.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(i){n.e("Error on GA thread"),n.e(i.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var t=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=t.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){r.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e.instance=new e,e.ThreadWaitTimeInMs=1e3,e.ProcessEventsIntervalInSeconds=8,e}();t.GAThreading=o})(e.threading||(e.threading={}))}(o||(o={})),function(t){var n=t.threading.GAThreading,i=t.logging.GALogger,r=t.store.GAStore,o=t.state.GAState,a=t.http.GAHTTPApi,s=t.device.GADevice,c=t.validators.GAValidator,l=t.http.EGAHTTPApiResponse,u=t.utilities.GAUtilities,d=t.events.GAEvents,f=function(){function f(){}return f.getGlobalObject=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0},f.init=function(){if(s.touch(),f.methodMap.configureAvailableCustomDimensions01=f.configureAvailableCustomDimensions01,f.methodMap.configureAvailableCustomDimensions02=f.configureAvailableCustomDimensions02,f.methodMap.configureAvailableCustomDimensions03=f.configureAvailableCustomDimensions03,f.methodMap.configureAvailableResourceCurrencies=f.configureAvailableResourceCurrencies,f.methodMap.configureAvailableResourceItemTypes=f.configureAvailableResourceItemTypes,f.methodMap.configureBuild=f.configureBuild,f.methodMap.configureSdkGameEngineVersion=f.configureSdkGameEngineVersion,f.methodMap.configureGameEngineVersion=f.configureGameEngineVersion,f.methodMap.configureUserId=f.configureUserId,f.methodMap.initialize=f.initialize,f.methodMap.addBusinessEvent=f.addBusinessEvent,f.methodMap.addResourceEvent=f.addResourceEvent,f.methodMap.addProgressionEvent=f.addProgressionEvent,f.methodMap.addDesignEvent=f.addDesignEvent,f.methodMap.addErrorEvent=f.addErrorEvent,f.methodMap.addAdEvent=f.addAdEvent,f.methodMap.setEnabledInfoLog=f.setEnabledInfoLog,f.methodMap.setEnabledVerboseLog=f.setEnabledVerboseLog,f.methodMap.setEnabledManualSessionHandling=f.setEnabledManualSessionHandling,f.methodMap.setEnabledEventSubmission=f.setEnabledEventSubmission,f.methodMap.setCustomDimension01=f.setCustomDimension01,f.methodMap.setCustomDimension02=f.setCustomDimension02,f.methodMap.setCustomDimension03=f.setCustomDimension03,f.methodMap.setGlobalCustomEventFields=f.setGlobalCustomEventFields,f.methodMap.setEventProcessInterval=f.setEventProcessInterval,f.methodMap.startSession=f.startSession,f.methodMap.endSession=f.endSession,f.methodMap.onStop=f.onStop,f.methodMap.onResume=f.onResume,f.methodMap.addRemoteConfigsListener=f.addRemoteConfigsListener,f.methodMap.removeRemoteConfigsListener=f.removeRemoteConfigsListener,f.methodMap.getRemoteConfigsValueAsString=f.getRemoteConfigsValueAsString,f.methodMap.isRemoteConfigsReady=f.isRemoteConfigsReady,f.methodMap.getRemoteConfigsContentAsString=f.getRemoteConfigsContentAsString,f.methodMap.addOnBeforeUnloadListener=f.addOnBeforeUnloadListener,f.methodMap.removeOnBeforeUnloadListener=f.removeOnBeforeUnloadListener,void 0!==f.getGlobalObject()&&void 0!==f.getGlobalObject().GameAnalytics&&void 0!==f.getGlobalObject().GameAnalytics.q){var e=f.getGlobalObject().GameAnalytics.q;for(var t in e)f.gaCommand.apply(null,e[t])}window.addEventListener("beforeunload",function(){console.log("addEventListener unload"),o.instance.isUnloading=!0,o.notifyBeforeUnloadListeners(),n.endSessionAndStopQueue(),o.instance.isUnloading=!1})},f.gaCommand=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length>0&&e[0]in t.GameAnalytics.methodMap&&(e.length>1?t.GameAnalytics.methodMap[e[0]].apply(null,Array.prototype.slice.call(e,1)):t.GameAnalytics.methodMap[e[0]]())},f.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):o.setAvailableCustomDimensions01(e)})},f.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):o.setAvailableCustomDimensions02(e)})},f.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):o.setAvailableCustomDimensions03(e)})},f.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available resource currencies must be set before SDK is initialized"):o.setAvailableResourceCurrencies(e)})},f.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available resource item types must be set before SDK is initialized"):o.setAvailableResourceItemTypes(e)})},f.configureBuild=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Build version must be set before SDK is initialized."):c.validateBuild(e)?o.setBuild(e):i.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},f.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)||(c.validateSdkWrapperVersion(e)?s.sdkGameEngineVersion=e:i.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e))})},f.configureGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)||(c.validateEngineVersion(e)?s.gameEngineVersion=e:i.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e))})},f.configureUserId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("A custom user id must be set before SDK is initialized."):c.validateUserId(e)?o.setUserId(e):i.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},f.initialize=function(e,t){void 0===e&&(e=""),void 0===t&&(t=""),s.updateConnectionType();var r=n.createTimedBlock();r.async=!0,f.initTimedBlockId=r.id,r.block=function(){f.isSdkReady(!0,!1)?i.w("SDK already initialized. Can only be called once."):c.validateKeys(e,t)?(o.setKeys(e,t),f.internalInitialize()):i.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+t)},n.performTimedBlockOnGAThread(r)},f.addBusinessEvent=function(e,t,i,r,a,c,l){if(void 0===e&&(e=""),void 0===t&&(t=0),void 0===i&&(i=""),void 0===r&&(r=""),void 0===a&&(a=""),void 0===c&&(c={}),void 0===l&&(l=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add business event"))return;d.addBusinessEvent(e,t,i,r,a,c,l)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add business event")&&d.addBusinessEvent(e,t,i,r,a,c,l)})},f.addResourceEvent=function(e,i,r,a,c,l,u){if(void 0===e&&(e=t.EGAResourceFlowType.Undefined),void 0===i&&(i=""),void 0===r&&(r=0),void 0===a&&(a=""),void 0===c&&(c=""),void 0===l&&(l={}),void 0===u&&(u=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add resource event"))return;d.addResourceEvent(e,i,r,a,c,l,u)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add resource event")&&d.addResourceEvent(e,i,r,a,c,l,u)})},f.addProgressionEvent=function(e,i,r,a,c,l,u){if(void 0===e&&(e=t.EGAProgressionStatus.Undefined),void 0===i&&(i=""),void 0===r&&(r=""),void 0===a&&(a=""),void 0===l&&(l={}),void 0===u&&(u=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add progression event"))return;var p="number"==typeof c;d.addProgressionEvent(e,i,r,a,p?c:0,p,l,u)}else n.performTaskOnGAThread(function(){if(f.isSdkReady(!0,!0,"Could not add progression event")){var t="number"==typeof c;d.addProgressionEvent(e,i,r,a,t?c:0,t,l,u)}})},f.addDesignEvent=function(e,t,i,r){if(void 0===i&&(i={}),void 0===r&&(r=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add design event"))return;var a="number"==typeof t;d.addDesignEvent(e,a?t:0,a,i,r)}else n.performTaskOnGAThread(function(){if(f.isSdkReady(!0,!0,"Could not add design event")){var n="number"==typeof t;d.addDesignEvent(e,n?t:0,n,i,r)}})},f.addErrorEvent=function(e,i,r,a){if(void 0===e&&(e=t.EGAErrorSeverity.Undefined),void 0===i&&(i=""),void 0===r&&(r={}),void 0===a&&(a=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add error event"))return;d.addErrorEvent(e,i,r,a)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add error event")&&d.addErrorEvent(e,i,r,a)})},f.addAdEventWithNoAdReason=function(e,i,r,a,c,l,u){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===i&&(i=t.EGAAdType.Undefined),void 0===r&&(r=""),void 0===a&&(a=""),void 0===c&&(c=t.EGAAdError.Undefined),void 0===l&&(l={}),void 0===u&&(u=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add ad event"))return;d.addAdEvent(e,i,r,a,c,0,!1,l,u)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add ad event")&&d.addAdEvent(e,i,r,a,c,0,!1,l,u)})},f.addAdEventWithDuration=function(e,i,r,a,c,l,u){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===i&&(i=t.EGAAdType.Undefined),void 0===r&&(r=""),void 0===a&&(a=""),void 0===c&&(c=0),void 0===l&&(l={}),void 0===u&&(u=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add ad event"))return;d.addAdEvent(e,i,r,a,t.EGAAdError.Undefined,c,!0,l,u)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add ad event")&&d.addAdEvent(e,i,r,a,t.EGAAdError.Undefined,c,!0,l,u)})},f.addAdEvent=function(e,i,r,a,c,l){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===i&&(i=t.EGAAdType.Undefined),void 0===r&&(r=""),void 0===a&&(a=""),void 0===c&&(c={}),void 0===l&&(l=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add ad event"))return;d.addAdEvent(e,i,r,a,t.EGAAdError.Undefined,0,!1,c,l)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add ad event")&&d.addAdEvent(e,i,r,a,t.EGAAdError.Undefined,0,!1,c,l)})},f.setEnabledInfoLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(i.setInfoLog(e),i.i("Info logging enabled")):(i.i("Info logging disabled"),i.setInfoLog(e))})},f.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(i.setVerboseLog(e),i.i("Verbose logging enabled")):(i.i("Verbose logging disabled"),i.setVerboseLog(e))})},f.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){o.setManualSessionHandling(e)})},f.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(o.setEnabledEventSubmission(e),i.i("Event submission enabled")):(i.i("Event submission disabled"),o.setEnabledEventSubmission(e))})},f.setCustomDimension01=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension01(e,o.getAvailableCustomDimensions01())?o.setCustomDimension01(e):i.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},f.setCustomDimension02=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension02(e,o.getAvailableCustomDimensions02())?o.setCustomDimension02(e):i.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},f.setCustomDimension03=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension03(e,o.getAvailableCustomDimensions03())?o.setCustomDimension03(e):i.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},f.setGlobalCustomEventFields=function(e){void 0===e&&(e={}),n.performTaskOnGAThread(function(){i.i("Set global custom event fields: "+JSON.stringify(e)),o.instance.currentGlobalCustomEventFields=e})},f.setEventProcessInterval=function(e){n.performTaskOnGAThread(function(){n.setEventProcessInterval(e)})},f.startSession=function(){if(o.isInitialized()){var e=n.createTimedBlock();e.async=!0,f.initTimedBlockId=e.id,e.block=function(){o.isEnabled()&&o.sessionIsStarted()&&n.endSessionAndStopQueue(),f.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)}},f.endSession=function(){f.onStop()},f.onStop=function(){n.performTaskOnGAThread(function(){try{n.endSessionAndStopQueue()}catch(e){}})},f.onResume=function(){var e=n.createTimedBlock();e.async=!0,f.initTimedBlockId=e.id,e.block=function(){f.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)},f.getRemoteConfigsValueAsString=function(e,t){return void 0===t&&(t=null),o.getConfigurationStringValue(e,t)},f.isRemoteConfigsReady=function(){return o.isRemoteConfigsReady()},f.addRemoteConfigsListener=function(e){o.addRemoteConfigsListener(e)},f.removeRemoteConfigsListener=function(e){o.removeRemoteConfigsListener(e)},f.getRemoteConfigsContentAsString=function(){return o.getRemoteConfigsContentAsString()},f.getABTestingId=function(){return o.getABTestingId()},f.getABTestingVariantId=function(){return o.getABTestingVariantId()},f.addOnBeforeUnloadListener=function(e){o.addOnBeforeUnloadListener(e)},f.removeOnBeforeUnloadListener=function(e){o.removeOnBeforeUnloadListener(e)},f.internalInitialize=function(){o.ensurePersistedStates(),r.setItem(o.getGameKey(),o.DefaultUserIdKey,o.getDefaultId()),o.setInitialized(!0),f.newSession(),o.isEnabled()&&n.ensureEventQueueIsRunning()},f.newSession=function(){i.i("Starting a new session."),o.validateAndFixCurrentDimensions(),a.instance.requestInit(o.instance.configsHash,f.startNewSessionCallback)},f.startNewSessionCallback=function(e,t){if(e!==l.Ok&&e!==l.Created||!t)e==l.Unauthorized?(i.w("Initialize SDK failed - Unauthorized"),o.instance.initAuthorized=!1):(e===l.NoResponse||e===l.RequestTimeout?i.i("Init call (session start) failed - no response. Could be offline or timeout."):e===l.BadResponse||e===l.JsonEncodeFailed||e===l.JsonDecodeFailed?i.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==l.BadRequest&&e!==l.UnknownResponseCode||i.i("Init call (session start) failed - bad request or unknown response."),null==o.instance.sdkConfig?null!=o.instance.sdkConfigCached?(i.i("Init call (session start) failed - using cached init values."),o.instance.sdkConfig=o.instance.sdkConfigCached):(i.i("Init call (session start) failed - using default init values."),o.instance.sdkConfig=o.instance.sdkConfigDefault):i.i("Init call (session start) failed - using cached init values."),o.instance.initAuthorized=!0);else{var a=0;if(t.server_ts){var s=t.server_ts;a=o.calculateServerTimeOffset(s)}if(t.time_offset=a,e!=l.Created){var c=o.getSdkConfig();c.configs&&(t.configs=c.configs),c.configs_hash&&(t.configs_hash=c.configs_hash),c.ab_id&&(t.ab_id=c.ab_id),c.ab_variant_id&&(t.ab_variant_id=c.ab_variant_id)}o.instance.configsHash=t.configs_hash?t.configs_hash:"",o.instance.abId=t.ab_id?t.ab_id:"",o.instance.abVariantId=t.ab_variant_id?t.ab_variant_id:"",r.setItem(o.getGameKey(),o.SdkConfigCachedKey,u.encode64(JSON.stringify(t))),o.instance.sdkConfigCached=t,o.instance.sdkConfig=t,o.instance.initAuthorized=!0}if(o.instance.clientServerTimeOffset=o.getSdkConfig().time_offset?o.getSdkConfig().time_offset:0,o.populateConfigurations(o.getSdkConfig()),!o.isEnabled())return i.w("Could not start session: SDK is disabled."),void n.stopEventQueue();n.ensureEventQueueIsRunning();var p=u.createGuid();o.instance.sessionId=p,o.instance.sessionStart=o.getClientTsAdjusted(),d.addSessionStartEvent();var g=n.getTimedBlockById(f.initTimedBlockId);null!=g&&(g.running=!1),f.initTimedBlockId=-1},f.resumeSessionAndStartQueue=function(){o.isInitialized()&&(i.i("Resuming session."),o.sessionIsStarted()||f.newSession())},f.isSdkReady=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=""),n&&(n+=": "),e&&!o.isInitialized()?(t&&i.w(n+"SDK is not initialized"),!1):e&&!o.isEnabled()?(t&&i.w(n+"SDK is disabled"),!1):!(e&&!o.sessionIsStarted()&&(t&&i.w(n+"Session has not started yet"),1))},f.initTimedBlockId=-1,f.methodMap={},f}();t.GameAnalytics=f}(o||(o={})),o.GameAnalytics.init(),o.GameAnalytics.gaCommand,t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return d.default}});var i=f(e("./v1.js")),r=f(e("./v3.js")),o=f(e("./v4.js")),a=f(e("./v5.js")),s=f(e("./nil.js")),c=f(e("./version.js")),l=f(e("./validate.js")),u=f(e("./stringify.js")),d=f(e("./parse.js"));function f(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":4,"./parse.js":5,"./stringify.js":9,"./v1.js":10,"./v3.js":11,"./v4.js":13,"./v5.js":14,"./validate.js":15,"./version.js":16}],3:[function(e,t,n){"use strict";function i(e){const t=[],n=32*e.length;for(let i=0;i<n;i+=8){const n=e[i>>5]>>>i%32&255,r=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16);t.push(r)}return t}function r(e){return 15+(e+64>>>9<<4)}function o(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let n=1732584193,i=-271733879,o=-1732584194,a=271733878;for(let r=0;r<e.length;r+=16){const t=n,c=i,p=o,g=a;n=l(n,i,o,a,e[r],7,-680876936),a=l(a,n,i,o,e[r+1],12,-389564586),o=l(o,a,n,i,e[r+2],17,606105819),i=l(i,o,a,n,e[r+3],22,-1044525330),n=l(n,i,o,a,e[r+4],7,-176418897),a=l(a,n,i,o,e[r+5],12,1200080426),o=l(o,a,n,i,e[r+6],17,-1473231341),i=l(i,o,a,n,e[r+7],22,-45705983),n=l(n,i,o,a,e[r+8],7,1770035416),a=l(a,n,i,o,e[r+9],12,-1958414417),o=l(o,a,n,i,e[r+10],17,-42063),i=l(i,o,a,n,e[r+11],22,-1990404162),n=l(n,i,o,a,e[r+12],7,1804603682),a=l(a,n,i,o,e[r+13],12,-40341101),o=l(o,a,n,i,e[r+14],17,-1502002290),n=u(n,i=l(i,o,a,n,e[r+15],22,1236535329),o,a,e[r+1],5,-165796510),a=u(a,n,i,o,e[r+6],9,-1069501632),o=u(o,a,n,i,e[r+11],14,643717713),i=u(i,o,a,n,e[r],20,-373897302),n=u(n,i,o,a,e[r+5],5,-701558691),a=u(a,n,i,o,e[r+10],9,38016083),o=u(o,a,n,i,e[r+15],14,-660478335),i=u(i,o,a,n,e[r+4],20,-405537848),n=u(n,i,o,a,e[r+9],5,568446438),a=u(a,n,i,o,e[r+14],9,-1019803690),o=u(o,a,n,i,e[r+3],14,-187363961),i=u(i,o,a,n,e[r+8],20,1163531501),n=u(n,i,o,a,e[r+13],5,-1444681467),a=u(a,n,i,o,e[r+2],9,-51403784),o=u(o,a,n,i,e[r+7],14,1735328473),n=d(n,i=u(i,o,a,n,e[r+12],20,-1926607734),o,a,e[r+5],4,-378558),a=d(a,n,i,o,e[r+8],11,-2022574463),o=d(o,a,n,i,e[r+11],16,1839030562),i=d(i,o,a,n,e[r+14],23,-35309556),n=d(n,i,o,a,e[r+1],4,-1530992060),a=d(a,n,i,o,e[r+4],11,1272893353),o=d(o,a,n,i,e[r+7],16,-155497632),i=d(i,o,a,n,e[r+10],23,-1094730640),n=d(n,i,o,a,e[r+13],4,681279174),a=d(a,n,i,o,e[r],11,-358537222),o=d(o,a,n,i,e[r+3],16,-722521979),i=d(i,o,a,n,e[r+6],23,76029189),n=d(n,i,o,a,e[r+9],4,-640364487),a=d(a,n,i,o,e[r+12],11,-421815835),o=d(o,a,n,i,e[r+15],16,530742520),n=f(n,i=d(i,o,a,n,e[r+2],23,-995338651),o,a,e[r],6,-198630844),a=f(a,n,i,o,e[r+7],10,1126891415),o=f(o,a,n,i,e[r+14],15,-1416354905),i=f(i,o,a,n,e[r+5],21,-57434055),n=f(n,i,o,a,e[r+12],6,1700485571),a=f(a,n,i,o,e[r+3],10,-1894986606),o=f(o,a,n,i,e[r+10],15,-1051523),i=f(i,o,a,n,e[r+1],21,-2054922799),n=f(n,i,o,a,e[r+8],6,1873313359),a=f(a,n,i,o,e[r+15],10,-30611744),o=f(o,a,n,i,e[r+6],15,-1560198380),i=f(i,o,a,n,e[r+13],21,1309151649),n=f(n,i,o,a,e[r+4],6,-145523070),a=f(a,n,i,o,e[r+11],10,-1120210379),o=f(o,a,n,i,e[r+2],15,718787259),i=f(i,o,a,n,e[r+9],21,-343485551),n=s(n,t),i=s(i,c),o=s(o,p),a=s(a,g)}return[n,i,o,a]}function a(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(r(t));for(let i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}function s(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function c(e,t,n,i,r,o){return s((a=s(s(t,e),s(i,o)))<<(c=r)|a>>>32-c,n);var a,c}function l(e,t,n,i,r,o,a){return c(t&n|~t&i,e,t,r,o,a)}function u(e,t,n,i,r,o,a){return c(t&i|n&~i,e,t,r,o,a)}function d(e,t,n,i,r,o,a){return c(t^n^i,e,t,r,o,a)}function f(e,t,n,i,r,o,a){return c(n^(t|~i),e,t,r,o,a)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return i(o(a(e),8*e.length))}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default="00000000-0000-0000-0000-000000000000"},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./validate.js"))&&i.__esModule?i:{default:i};n.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},{"./validate.js":15}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],7:[function(e,t,n){"use strict";let i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)};const r=new Uint8Array(16)},{}],8:[function(e,t,n){"use strict";function i(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:return t^n^i;case 2:return t&n^t&i^n&i;case 3:return t^n^i}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a);for(let i=0;i<a;++i){const t=new Uint32Array(16);for(let n=0;n<16;++n)t[n]=e[64*i+4*n]<<24|e[64*i+4*n+1]<<16|e[64*i+4*n+2]<<8|e[64*i+4*n+3];s[i]=t}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(let c=0;c<a;++c){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=s[c][t];for(let t=16;t<80;++t)e[t]=r(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let o=n[0],a=n[1],l=n[2],u=n[3],d=n[4];for(let n=0;n<80;++n){const s=Math.floor(n/20),c=r(o,5)+i(s,a,l,u)+d+t[s]+e[n]>>>0;d=u,u=l,l=r(a,30)>>>0,a=o,o=c}n[0]=n[0]+o>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+l>>>0,n[3]=n[3]+u>>>0,n[4]=n[4]+d>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./validate.js"))&&i.__esModule?i:{default:i};const o=[];for(let a=0;a<256;++a)o.push((a+256).toString(16).substr(1));n.default=function(e,t=0){const n=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,r.default)(n))throw TypeError("Stringified UUID is invalid");return n}},{"./validate.js":15}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./rng.js")),r=o(e("./stringify.js"));function o(e){return e&&e.__esModule?e:{default:e}}let a,s,c=0,l=0;n.default=function(e,t,n){let o=t&&n||0;const u=t||new Array(16);let d=(e=e||{}).node||a,f=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==f){const t=e.random||(e.rng||i.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==f&&(f=s=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:l+1;const v=p-c+(g-l)/1e4;if(v<0&&void 0===e.clockseq&&(f=f+1&16383),(v<0||p>c)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,l=g,s=f;const m=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;u[o++]=m>>>24&255,u[o++]=m>>>16&255,u[o++]=m>>>8&255,u[o++]=255&m;const h=p/4294967296*1e4&268435455;u[o++]=h>>>8&255,u[o++]=255&h,u[o++]=h>>>24&15|16,u[o++]=h>>>16&255,u[o++]=f>>>8|128,u[o++]=255&f;for(let i=0;i<6;++i)u[o+i]=d[i];return t||(0,r.default)(u)}},{"./rng.js":7,"./stringify.js":9}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./v35.js")),r=o(e("./md5.js"));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,i.default)("v3",48,r.default);n.default=a},{"./md5.js":3,"./v35.js":12}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){function o(e,o,s,c){if("string"==typeof e&&(e=a(e)),"string"==typeof o&&(o=(0,r.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(o),l.set(e,o.length),(l=n(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,s){c=c||0;for(let e=0;e<16;++e)s[c+e]=l[e];return s}return(0,i.default)(l)}try{o.name=e}catch(l){}return o.DNS=s,o.URL=c,o},n.URL=n.DNS=void 0;var i=o(e("./stringify.js")),r=o(e("./parse.js"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=s;const c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=c},{"./parse.js":5,"./stringify.js":9}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./rng.js")),r=o(e("./stringify.js"));function o(e){return e&&e.__esModule?e:{default:e}}n.default=function(e,t,n){const o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return(0,r.default)(o)}},{"./rng.js":7,"./stringify.js":9}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./v35.js")),r=o(e("./sha1.js"));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,i.default)("v5",80,r.default);n.default=a},{"./sha1.js":8,"./v35.js":12}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./regex.js"))&&i.__esModule?i:{default:i};n.default=function(e){return"string"==typeof e&&r.default.test(e)}},{"./regex.js":6}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./validate.js"))&&i.__esModule?i:{default:i};n.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},{"./validate.js":15}],FirebaseManager:[function(e,t,n){"use strict";cc._RF.push(t,"63d6aPku2hARIKblgdPR3IX","FirebaseManager");var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./TiniController"),o=cc._decorator,a=o.ccclass,s=(o.property,"players"),c=function(e,t,n){var i=e.constructor.getInstance(),r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(i._firebase)return r.apply(i,e);i._lazyCalls.push({func:n.value,args:arguments})}},l=function(){function e(){this._firebase=null,this._db=null,this._lazyCalls=[]}var t;return t=e,e.getInstance=function(){return t._instance?t._instance:(t._instance=new t,t._instance)},e.prototype.initFirebase=function(){var e,t,n,i,r=this;e=0,t=function(){if(++e<2)return i.onload=t,i.src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js",void document.body.appendChild(i);firebase.initializeApp({apiKey:"AIzaSyDofHcLmJbzQYUrPpxQL63FY3fQvQULkeg",authDomain:"tiniapp-4849d.firebaseapp.com",databaseURL:"https://tiniapp-4849d.asia-southeast2.firebasedatabase.app",projectId:"tiniapp-4849d",storageBucket:"tiniapp-4849d.appspot.com",messagingSenderId:"277017087919",appId:"1:277017087919:web:47676b9305c8d101a5e95a"}),r._firebase=firebase,r._db=firebase.firestore(),window.firebase=null,r._lazyCalls.forEach(function(e){return e.func.apply(e,e.args)})},n=document.createElement("script"),i=document.createElement("script"),n.onload=t,n.src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js",document.body.appendChild(n)},e.prototype.getPlayerRef=function(e){r.default.getInstance().getPlayerInfo().then(function(t){var n=t.customerId;return e+"/"+n})},e.prototype.setData=function(e,t,n){console.log("Check params",e,t,n);try{this._db.collection(e).doc("user_"+t).set(n,{merge:!0}).then(function(){console.log("Document written")}).catch(function(e){console.error("Error adding document: ",e)})}catch(i){console.error("save firebase err: ",i)}},e.prototype.getData=function(e,t,n){this._db.collection(e).doc(t).get().then(function(i){if(i.exists){var r=i.data();n(r)}else console.log("no doc",e,t),n(null,null)}).catch(function(e){n(e)})},e.prototype.setPlayerData=function(e,t){e&&this.setData(s,e,t)},e.prototype.getPlayerData=function(e){var t=this;r.default.getInstance().getPlayerInfo().then(function(n){var i=n.customerId;if(!i)return e(null,null);t.getData(s,i,e)})},e.prototype.getFriendData=function(e,t){var n=this;r.default.getInstance().getPlayerInfo().then(function(i){if(!i.customerId)return t(null,null);n.getData(s,e,t)})},e.prototype.getConfig=function(e){this._db.collection("config").doc("configId").get().then(function(t){t.exists?e(null,t.data()):e(null,null)}).catch(function(t){e(t,null)})},e.prototype.getLeaderboard=function(e){var t=[];this._db.collection(s).orderBy("bestScore","desc").get().then(function(n){n.empty?(console.log("no doc"),e(null)):(n.docs.forEach(function(e,n){t.push({name:e.data().name,ava:e.data().ava,rank:n+1,id:e.id,bestScore:e.data().bestScore})}),console.log(t),e(t))}).catch(function(t){e(t)})},e._instance=null,i([c],e.prototype,"setPlayerData",null),i([c],e.prototype,"getPlayerData",null),i([c,c],e.prototype,"getConfig",null),i([c],e.prototype,"getLeaderboard",null),t=i([a],e)}();n.default=l,cc._RF.pop()},{"./TiniController":"TiniController"}],GameController:[function(e,t,n){"use strict";cc._RF.push(t,"cf402XHasBL4oc62hnLOMe5","GameController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./NumberController"),s=e("./SquareController"),c=e("./GuideController"),l=e("./FirebaseManager"),u=e("./AudioController"),d=e("./MusicController"),f=e("./TiniController"),p=e("gameanalytics"),g=e("gameanalytics"),v="bf49352ecdd23a6eaae1b4c7d820f2fc",m="37718a85f37bdbd12ee01081e4315d77c4afcc93",h=cc._decorator,y=h.ccclass,b=h.property,S=cc.tween,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.newNumberHolder=null,t.block=null,t.canvasNode=null,t.boom_anim=null,t.pause_board=null,t.gameOverPNG=null,t.screen=null,t.number=null,t.hammerPrefab=null,t.flyingScore=null,t.squareNodeArr=[],t.scoreText=null,t.bestScoreText=null,t.success_sfx=[],t.place_sfx=null,t.place_wrong_sfx=null,t.tap_sfx=null,t.gameover_sfx=null,t.rankTable=null,t.overLay=null,t.userRankPrefab=null,t.rankList=null,t.pauseBtn=null,t.musicBtn=null,t.vfxBtn=null,t.rankBtn=null,t.guideBoard=null,t.guideAnim=null,t.guideArrow=null,t.newNumberArr=[],t.squareArr=[],t.hexaMap=[],t.newNumberMap=[],t.isLoadInterestialAds=!0,t.isCombing=!1,t}return r(t,e),t.prototype.onLoad=function(){var e=this;this.musicBtn.init(this),l.default.getInstance().initFirebase(),f.default.getInstance().init(this),p.GameAnalytics.setEnabledInfoLog(!0),p.GameAnalytics.setEnabledVerboseLog(!0),p.GameAnalytics.configureBuild("1.0.0"),f.default.getInstance().isHasTiniApp()?f.default.getInstance().getPlayerInfo().then(function(e){p.GameAnalytics.configureUserId(e.customerId.toString()),p.GameAnalytics.initialize(v,m)}):(p.GameAnalytics.configureUserId("local_id"),p.GameAnalytics.initialize(v,m)),this.getComponent(c.default).init(this),this.isPausing=!1,this.pause_board.active=!1,this.rankTable.active=!1,this.gameOverPNG.active=!1,this.animation_boom=this.boom_anim.getComponent(sp.Skeleton),this.boom_anim.zIndex=3,this.gapX=210,this.gapY=330,this.getSquareControllerComponent(),this.block=this.newNumberHolder.getChildByName("block"),this.newNumberHolder.on(cc.Node.EventType.TOUCH_START,this.onTouchBlockStart,this),this.newNumberHolder.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.newNumberHolder.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.newNumberHolder.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),cc.director.getPhysicsManager().enabled=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.node.on("GameOver",this.gameOver,this),f.default.getInstance().isHasTiniApp()?(f.default.getInstance().getPlayerInfo().then(function(t){e.userInfo=t}),this.initDataTiniApp()):this.initDataWithLocalStorage()},t.prototype.initDataWithLocalStorage=function(){var e,t,n;this.bestScore=parseInt(cc.sys.localStorage.getItem("bestScoreHexa")),(null==this.bestScore||isNaN(this.bestScore))&&(cc.sys.localStorage.setItem("bestScoreHexa",0),this.bestScore=0),this.score=parseInt(cc.sys.localStorage.getItem("scoreHexa")),(null==this.bestScore||isNaN(this.bestScore))&&(this.score=0,cc.sys.localStorage.setItem("scoreHexa",0)),this.isPlaying=cc.sys.localStorage.getItem("isPlayingHexa"),this.isPlaying="true"===this.isPlaying,null==this.isPlaying&&(this.isPlaying=!1,cc.sys.localStorage.setItem("isPlayingHexa",this.isPlaying)),this.typeOfNewBlock=parseInt(cc.sys.localStorage.getItem("typeOfNewBlock")),null==this.typeOfNewBlock&&(this.typeOfNewBlock=-1,cc.sys.localStorage.setItem("typeOfNewBlock",this.typeOfNewBlock)),this.newNumberMap=cc.sys.localStorage.getItem("newNumberMap"),null==this.newNumberMap&&(this.newNumberMap=[null,null,null],cc.sys.localStorage.setItem("newNumberMap",this.newNumberMap));var i=null!==(e=cc.sys.localStorage.getItem("hexaMap"))&&void 0!==e?e:"";if(0==",,,,,,,,,,,,,,,,,,".localeCompare(i)||0==i.length)this.hexaMap=new Array(19);else{var r=null!==(t=JSON.parse(cc.sys.localStorage.getItem("hexaMap")))&&void 0!==t?t:[];0==r.length?(this.hexaMap=new Array(19),cc.sys.localStorage.setItem("hexaMap",JSON.stringify(this.hexaMap))):this.hexaMap=r}var o=null!==(n=cc.sys.localStorage.getItem("newNumberMap"))&&void 0!==n?n:"";if(0==",,".localeCompare(o)||0==o.length)this.newNumberMap=[],this.typeOfNewBlock=-1;else{var a=JSON.parse(cc.sys.localStorage.getItem("newNumberMap"));0==a.length?(this.newNumberMap=[],this.typeOfNewBlock=-1,cc.sys.localStorage.setItem("newNumberMap",JSON.stringify(this.newNumberMap))):this.newNumberMap=a}this.startGame()},t.prototype.initDataTiniApp=function(){var e=this;setTimeout(function(){f.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"bestScoreHexa"}},function(t){e.bestScore=parseInt(t.res.data),(null==e.bestScore||isNaN(e.bestScore))&&(f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"bestScoreHexa",data:0}}),e.bestScore=0)}),f.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"scoreHexa"}},function(t){e.score=parseInt(t.res.data),(null==e.score||isNaN(e.score))&&(f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"scoreHexa",data:0}}),e.score=0)}),f.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"isPlayingHexa"}},function(t){e.isPlaying=t.res.data,e.isPlaying="true"===e.isPlaying,null==e.isPlaying&&(e.isPlaying=!1,f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"isPlayingHexa",data:e.isPlaying}}))}),f.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"typeOfNewBlock"}},function(t){e.typeOfNewBlock=parseInt(t.res.data),null==e.typeOfNewBlock&&(e.typeOfNewBlock=-1,f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"typeOfNewBlock",data:e.typeOfNewBlock}}))}),f.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"newNumberMap"}},function(t){e.newNumberMap=t.res.data,null!=e.newNumberMap&&null!=e.newNumberMap||(e.newNumberMap=[null,null,null],f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"newNumberMap",data:e.newNumberMap}}))}),f.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"hexaMap"}},function(t){var n,i,r=null!==(n=t.res.data)&&void 0!==n?n:"";if(0==",,,,,,,,,,,,,,,,,,".localeCompare(r)||0==r.length)e.hexaMap=new Array(19);else{var o=null!==(i=JSON.parse(t.res.data))&&void 0!==i?i:[];0==o.length?(e.hexaMap=new Array(19),f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"hexaMap",data:JSON.stringify(e.hexaMap)}})):e.hexaMap=o}}),f.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"newNumberMap"}},function(t){var n,i=null!==(n=t.res.data)&&void 0!==n?n:"";if(0==",,".localeCompare(i)||0==i.length)e.newNumberMap=[],e.typeOfNewBlock=-1;else{var r=JSON.parse(t.res.data);0==r.length?(e.newNumberMap=[],e.typeOfNewBlock=-1,f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"hexaMap",data:JSON.stringify(e.newNumberMap)}})):e.newNumberMap=r}console.log("Load data tini done..."),e.startGame()})},0)},t.prototype.start=function(){},t.prototype.startGame=function(){this.getComponent(c.default)._isNewBie?(console.log("Run guide",this.isPlaying),this.getComponent(c.default).increaseGuideLevel(),this.getComponent(c.default).loadGuide()):(console.log("Load game..."),1==this.isPlaying?this.loadOldGame():this.newGame()),this.updateScore()},t.prototype.loadOldGame=function(){this.clearTable();for(var e=0;e<19;++e)if(null!=this.hexaMap[e]){var t=cc.instantiate(this.number).getComponent(a.default);t.node.setParent(this.board),this.setValue(t,this.hexaMap[e]),t.node.setPosition(this.squareArr[e].node.position),this.squareArr[e].placedNumber=t,t.stackingSquare=this.squareArr[e],this.squareArr[e].node.opacity=20}switch(this.typeOfNewBlock){case-1:this.respondNewNumber();break;case 1:this.loadSingleNewNumber();break;case 2:this.loadDoubleNewNumber()}this.updateScore()},t.prototype.loadDoubleNewNumber=function(){this.respondDoubleBlock(),this.newNumberArr[0].value=this.newNumberMap[0],this.newNumberArr[0].updateText(),this.newNumberArr[1].value=this.newNumberMap[1],this.newNumberArr[1].updateText()},t.prototype.loadSingleNewNumber=function(){this.respondSingleBlock(),this.newNumberArr[0].value=this.newNumberMap[0],this.newNumberArr[0].updateText(),-1==this.newNumberArr[0].value&&this.respond_bomb()},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.tab:this.isPlaying||this.checkHexa()}},t.prototype.onTouchMove=function(e){if(1==this.isPlaying&&0==this.isPausing){var t=e.touch.getDelta();this.block.x+=t.x,this.block.y+=t.y}3===this.getComponent(c.default).guideLevel&&(this.guideArrow.opacity=0,this.guideAnim.opacity=0)},t.prototype.onTouchBlockStart=function(e){this.isCombing||(this.isPlaying&&!this.isPausing?(this.touchStartLocation=e.getLocation(),S(this.block).to(.05,{scale:1.05}).start()):0==this.isPausing&&this.newGame()),e.stopPropagationImmediate()},t.prototype.onTouchEnd=function(e){if(!this.isCombing)if(this.isPlaying&&!this.isPausing){this.touchEndLocation=e.getLocation();var t=this.touchEndLocation.y-this.touchStartLocation.y;S(this.block).to(.05,{scale:1}).start(),Math.abs(t)>10?this.relocateBlock():this.touchEndLocation.y<500&&this.rotateBlock()}else this.isPlaying=!0},t.prototype.relocateBlock=function(){this.allInTable()?this.placeBlockInTable():(S(this.block).to(.05,{position:cc.v3(0,0,0)},{easing:"cubicOut"}).start(),this.vfxBtn.vfxState&&cc.audioEngine.playEffect(this.place_wrong_sfx,!1))},t.prototype.combineNumber=function(e){var t=this;if(this.isCombing=!0,e!=this.newNumberArr.length&&-1!=this.newNumberArr[0].value){if(null!=this.newNumberArr[0].stackingSquare&&0==e&&2==this.newNumberArr.length&&this.newNumberArr[0].value==this.newNumberArr[1].value){var n=this.newNumberArr[0].stackingSquare.linkedSquareList,i=0;for(i=0;i<n.length&&(null==n[i].placedNumber||n[i].placedNumber.value!=this.newNumberArr[0].value+1);++i);if(i==n.length){var r=this.newNumberArr[1];this.newNumberArr[0]=r,this.newNumberArr[1]=this.newNumberArr[0]}}var o=0;this.visitedSquareIndex=[],null!=this.newNumberArr[e].stackingSquare&&-1==this.visitedSquareIndex.indexOf(this.newNumberArr[e].stackingSquare.index)?(this.sameNumberArr=[],this.searchSameNumber(this.newNumberArr[e]),this.sameNumberArr.length>1?S(this.newNumberArr[e]).delay(.5*o).call(function(){for(var n=function(n){S(t.sameNumberArr[n].node).parallel(S().call(function(){t.sameNumberArr[n]&&(t.sameNumberArr[n].node.zIndex=1,t.sameNumberArr[n].stackingSquare.node.opacity=150)}).to(.3,{position:t.newNumberArr[e].node.position}),S().by(.15,{scale:.25}).by(.15,{scale:-.25})).call(function(){t.sameNumberArr[n]&&(t.sameNumberArr[n].node.active=!1,t.sameNumberArr[n].node.destroy())}).start()},i=0;i<t.sameNumberArr.length;++i)n(i)}).delay(.5).call(function(){++t.newNumberArr[e].value,t.newNumberArr[e].updateText(),t.boom_anim.position=t.newNumberArr[e].node.position;var n=t.newNumberArr[e].node.parent.convertToWorldSpaceAR(t.newNumberArr[e].node.position);n=t.canvasNode.convertToNodeSpaceAR(n);var i=t.countDuplicateItem(t.sameNumberArr),r=t.sameNumberArr[0].value,a=t.sameNumberArr.length;t.popFlyingScore(t.caculatorScore(a-i+1,r),n),t.newNumberArr[e].value<7?t.animation_boom.setAnimation(0,"fx_2",!1):(t.animation_boom.setAnimation(0,"fx_2",!1),S(t.newNumberArr[e].node).delay(.5).call(function(){t.newNumberArr[e].stackingSquare.node.opacity=150}).to(.3,{opacity:0}).call(function(){t.animation_boom.setAnimation(0,"fx_1",!1),t.newNumberArr[e].node.active=!1,t.popFlyingScore(50,n)}).start()),++o}).delay(.85).call(function(){for(var e=0;e<t.squareArr.length;++e)null==t.squareArr[e].placedNumber||null!=t.squareArr[e].placedNumber.node&&0!=t.squareArr[e].placedNumber.node.active||(t.squareArr[e].placedNumber=null);t.combineNumber(0)}).start():this.combineNumber(++e)):this.combineNumber(++e),this.getComponent(c.default)._isNewBie&&this.getComponent(c.default).increaseGuideLevel()}else{for(var a=0;a<this.squareArr.length;++a)null==this.squareArr[a].placedNumber||null!=this.squareArr[a].placedNumber.node&&0!=this.squareArr[a].placedNumber.node.active||(this.squareArr[a].placedNumber=null);this.respondNewNumber()}},t.prototype.updateScore=function(){this.score>this.bestScore&&(this.bestScore=this.score),this.bestScoreText.string=this.bestScore.toString(),this.scoreText.string=this.score.toString()},t.prototype.searchSameNumber=function(e){var t=[];this.visitedSquareIndex.push(e.stackingSquare.index);for(var n=0;n<e.stackingSquare.linkedSquareList.length;++n)e.stackingSquare.linkedSquareList[n].placedNumber;for(n=0;n<e.stackingSquare.linkedSquareList.length;++n)-1==this.visitedSquareIndex.lastIndexOf(e.stackingSquare.linkedSquareList[n].index)&&null!=e.stackingSquare.linkedSquareList[n].placedNumber&&e.stackingSquare.linkedSquareList[n].placedNumber.value==e.value&&null!=e.stackingSquare.linkedSquareList[n].placedNumber.stackingSquare&&(t.push(e.stackingSquare.linkedSquareList[n].index),this.sameNumberArr.push(e.stackingSquare.linkedSquareList[n].placedNumber));for(var i=0;i<t.length;++i)this.searchSameNumber(this.squareArr[t[i]].placedNumber)},t.prototype.placeBlockInTable=function(){var e=this;if(-1!=this.newNumberArr[0].value){for(var t=0;t<this.squareArr.length;++t)null!=this.squareArr[t].stackingNumber&&(this.squareArr[t].placedNumber=this.squareArr[t].stackingNumber,this.squareArr[t].placedNumber.stackingSquare=this.squareArr[t],this.changeParent(this.squareArr[t].placedNumber.node,this.board),S(this.squareArr[t].placedNumber.node).to(.1,{position:this.squareArr[t].placedNumber.stackingSquare.node.position}).start());this.combineNumber(0)}else-1==this.newNumberArr[0].value&&S(this.newNumberArr[0].node).call(function(){e.hammer.node.y+=140,e.hammer.node.x+=100,e.hammer.setAnimation(0,"dapbua",!1),null==e.newNumberArr[0].stackingSquare.placedNumber&&(e.newNumberArr[0].stackingSquare.node.opacity=150)}).delay(1).call(function(){e.newNumberArr[0].node.opacity=0;for(var t=e.newNumberArr[0].stackingSquare.linkedSquareList,n=function(n){null!=t[n].placedNumber&&S(t[n].placedNumber.node).delay(.3*n).parallel(S().to(.3,{opacity:0}),S(t[n].placedNumber.node).to(.3,{opacity:150}).start()).call(function(){e.boom_anim.position=t[n].placedNumber.node.position,e.animation_boom.setAnimation(0,"fx_1",!1),t[n].placedNumber.node.active=!1,t[n].node.opacity=150}).start()},i=0;i<t.length;++i)n(i);null!=e.newNumberArr[0].stackingSquare.placedNumber?S(e.newNumberArr[0].stackingSquare.placedNumber.node).delay(.3*t.length).parallel(S().to(.3,{opacity:0}),S(e.newNumberArr[0].stackingSquare.node).to(.3,{opacity:150}).start()).call(function(){e.boom_anim.position=e.newNumberArr[0].stackingSquare.placedNumber.node.position,e.animation_boom.setAnimation(0,"fx_1",!1),e.newNumberArr[0].stackingSquare.placedNumber.node.active=!1,e.cleanTableAndRespond()}).start():S(e.node).delay(.3*t.length).call(function(){e.cleanTableAndRespond()}).start()}).start();this.vfxBtn.vfxState&&cc.audioEngine.playEffect(this.place_sfx,!1)},t.prototype.cleanTableAndRespond=function(){for(var e=0;e<this.squareArr.length;++e)null==this.squareArr[e].placedNumber||null!=this.squareArr[e].placedNumber.node&&0!=this.squareArr[e].placedNumber.node.active||(this.squareArr[e].placedNumber=null);for(var t=0;t<this.newNumberArr.length;++t)null!=this.newNumberArr[t]&&(this.newNumberArr[t].node.active=!1,this.newNumberArr[t].node.destroy(),this.newNumberArr[t]=null);this.respondNewNumber()},t.prototype.printCurrentMap=function(){for(var e=0;e<this.squareArr.length;++e)null!=this.squareArr[e].placedNumber?console.log(this.squareArr[e].index+" - "+this.squareArr[e].placedNumber.value):console.log(this.squareArr[e].index+" - NO PLACED NUMBER")},t.prototype.changeParent=function(e,t){if(e.parent!=t){var n=function(e){var t=e,n=t.angle;do{n+=(t=t.parent).angle}while(null!=t.parent);return n%360},i=n(e)-n(t),r=e.convertToWorldSpaceAR(cc.v3(0,0,0)),o=t.convertToNodeSpaceAR(r);e.parent=t,e.position=o,e.angle=i}},t.prototype.allInTable=function(){for(var e=0;e<this.newNumberArr.length;++e)if(null==this.newNumberArr[e].stackingSquare)return!1;return!0},t.prototype.newGame=function(){cc.tween(this.getComponent(cc.AudioSource)).to(.5,{volume:.3}).start(),this.clearTable(),this.disappear(this.gameOverPNG),this.score=0,this.createRandomNumberOnTable(),this.respondNewNumber(),this.isPlaying=!0,this.hexaMap=[],this.updateScore()},t.prototype.createRandomNumberOnTable=function(){var e=cc.instantiate(this.number).getComponent(a.default),t=cc.instantiate(this.number).getComponent(a.default);console.log(e.node.width,t.node.height),e.node.scale=.1,t.node.scale=.1,e.node.setParent(this.board),t.node.setParent(this.board),this.chooseValue(e),this.chooseValue(t);var n=Math.floor(18*Math.random()),i=this.squareArr[n].node;e.node.setPosition(i.position),this.squareArr[n].placedNumber=e,e.stackingSquare=this.squareArr[n];for(var r=Math.floor(18*Math.random());n==r;)r=Math.floor(18*Math.random());i=this.squareArr[r].node,t.node.setPosition(i.position),this.squareArr[r].placedNumber=t,t.stackingSquare=this.squareArr[r],S(e.node).to(.1,{scale:1}).start(),S(t.node).to(.1,{scale:1}).start()},t.prototype.clearTable=function(){for(var e=0;e<this.squareArr.length;++e)null!=this.squareArr[e].placedNumber?(this.squareArr[e].placedNumber.node.active=!1,this.squareArr[e].placedNumber.node.destroy(),this.squareArr[e].node.opacity=150):this.squareArr[e].node.opacity=150,this.squareArr[e].placedNumber=null;for(e=0;e<this.newNumberArr.length;++e)this.newNumberArr[e].node.active=!1,this.newNumberArr[e].node.destroy(),this.newNumberArr[e]=null},t.prototype.respondNewNumber=function(){if(this.getComponent(c.default)._isNewBie&&this.getComponent(c.default).guideLevel<=2)this.getComponent(c.default).setPieceBlock();else{this.getComponent(c.default)._isNewBie&&this.getComponent(c.default).finishGuide();var e=this.checkPlayable();if(this.newNumberArr=[],this.block.setPosition(cc.v3(0,0,0)),this.block.angle=0,2==e){var t=Math.random();t<.5?(this.respondSingleBlock(),this.typeOfNewBlock=1):t<1&&(this.respondDoubleBlock(),this.typeOfNewBlock=2)}else 1==e?(this.respondSingleBlock(),this.typeOfNewBlock=1):this.node.emit("gameOver");this.newNumberArr.sort(function(e,t){return e.value==t.value?0:e.value>t.value?1:e.value<t.value?-1:void 0}),this.storeGameData()}},t.prototype.checkPlayable=function(){return 1==this.checkPlayable_2()?2:1==this.checkPlayable_1()?1:(this.storeGameData(),this.node.emit("GameOver"),0)},t.prototype.storeGameData=function(){for(var e=0;e<this.squareArr.length;++e)null==this.squareArr[e].placedNumber?this.hexaMap[e]=null:this.hexaMap[e]=this.squareArr[e].placedNumber.value;for(e=0;e<this.newNumberArr.length;++e)null==this.newNumberArr[e]?this.newNumberMap[e]=null:this.newNumberMap[e]=this.newNumberArr[e].value;f.default.getInstance().isHasTiniApp()?(f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"newNumberMap",data:JSON.stringify(this.newNumberMap)}}),f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"hexaMap",data:JSON.stringify(this.hexaMap)}}),f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"isPlayingHexa",data:JSON.stringify(this.isPlaying)}}),f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"typeOfNewBlock",data:JSON.stringify(this.typeOfNewBlock)}}),f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"scoreHexa",data:JSON.stringify(this.score)}}),f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"bestScoreHexa",data:JSON.stringify(this.bestScore)}})):(cc.sys.localStorage.setItem("newNumberMap",JSON.stringify(this.newNumberMap)),cc.sys.localStorage.setItem("hexaMap",JSON.stringify(this.hexaMap)),cc.sys.localStorage.setItem("isPlayingHexa",this.isPlaying),cc.sys.localStorage.setItem("typeOfNewBlock",this.typeOfNewBlock),cc.sys.localStorage.setItem("scoreHexa",this.score),cc.sys.localStorage.setItem("bestScoreHexa",this.bestScore))},t.prototype.checkPlayable_3=function(){for(var e=0;e<this.squareArr.length;++e)if(null==this.squareArr[e].placedNumber)for(var t=this.squareArr[e],n=0;n<t.linkedSquareList.length;++n)if(null==this.squareArr[e].linkedSquareList[n].placedNumber){var i=this.squareArr[e].linkedSquareList[n];if(null!=this.squareArr[i.index+(i.index-t.index)]&&null==this.squareArr[i.index+(i.index-t.index)].placedNumber&&i.index-t.index==this.squareArr[i.index+(i.index-t.index)].index-i.index)return;if(i.index-t.index==5&&(null==this.squareArr[i.index+1]||null==this.squareArr[i.index+4]))return;if(i.index-t.index==4&&(null==this.squareArr[i.index-1]||null==this.squareArr[i.index+5]))return}this.node.emit("gameOver")},t.prototype.checkPlayable_2=function(){for(var e=!1,t=0;t<this.squareArr.length;++t)if(null==this.squareArr[t].placedNumber)for(var n=0;n<this.squareArr[t].linkedSquareList.length;++n)null==this.squareArr[t].linkedSquareList[n].placedNumber&&(e=!0);return e},t.prototype.checkPlayable_1=function(){for(var e=!1,t=0;t<this.squareArr.length;++t)null==this.squareArr[t].placedNumber&&(e=!0);return e},t.prototype.chooseValue=function(e){var t=Math.random();t<.05?e.value=6:t<44/300?e.value=5:t<.29?e.value=4:t<.48?e.value=3:t<215/300&&(e.value=2),e.updateText()},t.prototype.setValue=function(e,t){e.value=t,e.updateText()},t.prototype.respondDoubleBlock=function(){var e=cc.instantiate(this.number).getComponent(a.default),t=cc.instantiate(this.number).getComponent(a.default);e.node.scale=.1,t.node.scale=.1,e.node.setParent(this.block),t.node.setParent(this.block),this.chooseValue(e),this.chooseValue(t),e.node.setPosition(this.block.position.x-this.gapX/2,this.block.position.y),t.node.setPosition(this.block.position.x+this.gapX/2,this.block.position.y),S(e.node).to(.1,{scale:1}).start(),S(t.node).to(.1,{scale:1}).start(),this.newNumberArr.push(e),this.newNumberArr.push(t),this.isCombing=!1},t.prototype.respondSingleBlock=function(){var e=cc.instantiate(this.number).getComponent(a.default);e.node.setParent(this.block),this.chooseValue(e),e.node.setPosition(this.block.position),this.newNumberArr.push(e),this.isCombing=!1},t.prototype.rotateBlock=function(){this.vfxBtn.vfxState&&cc.audioEngine.playEffect(this.tap_sfx,!1),this.newNumberArr.length>1?(S(this.block).to(.05,{position:cc.v3(0,0,0)}).by(.1,{angle:-60}).start(),this.newNumberArr.forEach(function(e){S(e.node).delay(.05).by(.1,{angle:60}).start()})):S(this.block).to(.05,{position:cc.v3(0,0,0)}).start()},t.prototype.getSquareControllerComponent=function(){for(var e=0;e<this.squareNodeArr.length;++e)this.squareArr.push(this.squareNodeArr[e].getComponent(s.default)),this.squareArr[e].index=e},t.prototype.checkHexa=function(){for(var e=this,t=function(t){S(n.squareNodeArr[t]).delay(2*t).by(.2,{opacity:150}).call(function(){for(var n=0;n<e.squareArr[t].linkedSquareList.length;++n)S(e.squareArr[t].linkedSquareList[n].node).delay(.2*n).by(.15,{opacity:100}).by(.15,{opacity:-100}).start()}).delay(1).by(.2,{opacity:-150}).start()},n=this,i=0;i<this.squareArr.length;++i)t(i)},t.prototype.gameOver=function(){var e=this;cc.tween(this.getComponent(cc.AudioSource)).to(.5,{volume:0}).start(),this.vfxBtn.vfxState&&cc.audioEngine.playEffect(this.gameover_sfx,!1);var t=this.gameOverPNG;this.isPlaying=!1,this.isPausing=!0,S(t).delay(1).call(function(){e.disappear(e.block),t.scale=.1,t.active=!0}).to(.5,{scale:1}).start(),this.changeStateOverLay(),f.default.getInstance().isHasTiniApp()&&f.default.getInstance().sendMessageToTiniApp({api:"reportAnalytics",params:{event:"post_score",data:{score:this.score,user_id:this.userInfo.customerId,character:this.userInfo.name}}}),this.storeGameData(),this.saveDataToFireBase(),this.logScore(this.score)},t.prototype.pauseGame=function(){this.pause_board.getChildByName("score").getComponent(cc.Label).string=String(this.score),this.isPausing=!0,this.appear(this.pause_board),this.changeStateOverLay()},t.prototype.continueGame=function(){this.isPausing=!1,this.disappear(this.pause_board),this.changeStateOverLay()},t.prototype.newGameButton=function(){this.vfxBtn.vfxState&&cc.audioEngine.playEffect(this.tap_sfx,!1),this.disappear(this.pause_board),this.appear(this.block),this.block.active=!0,this.isPausing=!1,this.newGame(),this.changeStateOverLay()},t.prototype.appear=function(e){e.scale=.1,e.active=!0,S(e).to(.1,{scale:1}).start()},t.prototype.disappear=function(e){S(e).to(.1,{scale:.1}).call(function(){e.active=!1}).start()},t.prototype.playAgain=function(){this.vfxBtn.vfxState&&cc.audioEngine.playEffect(this.tap_sfx,!1),this.changeStateOverLay(),cc.tween(this.getComponent(cc.AudioSource)).to(.5,{volume:.3}).start(),this.isPlaying=!0,this.isPausing=!1,this.disappear(this.gameOverPNG),this.respond_bomb(),this.storeGameData()},t.prototype.respond_bomb=function(){for(var e=0;e<this.newNumberArr.length;++e)this.newNumberArr[e].node.active=!1,this.newNumberArr[e].node.destroy(),this.newNumberArr[e]=null;this.newNumberArr=[],this.block.setPosition(cc.v3(0,0,0)),this.block.angle=0,this.respondSingleBlock(),this.hammer=cc.instantiate(this.hammerPrefab).getComponent(sp.Skeleton),this.hammer.node.setParent(this.newNumberArr[0].node),this.hammer.node.setPosition(0,-280,0),this.appear(this.block),this.newNumberArr[0].value=-1,this.newNumberArr[0].updateText()},t.prototype.popFlyingScore=function(e,t){var n=this,i=cc.instantiate(this.flyingScore);i.setParent(this.screen),i.setPosition(t),i.active=!0,i.getComponent(cc.Label).string="+"+e;var r=150*Math.random()+50,o=360*Math.random();i.setScale(.01),cc.tween(i).parallel(S().by(.1,{x:r*Math.cos(o),y:r*Math.sin(o)},{easing:"cubicIn"}),S().by(.1,{scale:1})).to(1.5,{position:this.scoreText.node.position,opacity:10},{easing:"cubicIn"}).call(function(){n.addScore(e),i.destroy()}).start()},t.prototype.addScore=function(e){var t=this;this.score+=e,this.updateScore(),f.default.getInstance().isHasTiniApp()?(f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"scoreHexa",data:this.score}}),f.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"bestScoreHexa",data:this.bestScore}},function(){t.saveDataToFireBase()})):cc.sys.localStorage.setItem("scoreHexa",this.score)},t.prototype.changeStateRankTable=function(){var e=this;0===this.rankTable.x?(this.isPausing=!1,cc.tween(this.rankTable).to(.3,{position:cc.v3(-1642,0,0)}).call(function(){e.rankTable.active=!1}).start()):(this.renderRank(),this.isPausing=!0,this.rankTable.active=!0,cc.tween(this.rankTable).to(.3,{position:cc.v3(0,0,0)}).start()),this.changeStateOverLay()},t.prototype.animWhenClick=function(e){this.vfxBtn.vfxState&&cc.audioEngine.playEffect(this.tap_sfx,!1),cc.tween(e.target).to(.1,{scale:1.2}).to(.1,{scale:1}).start()},t.prototype.closeOptionTable=function(){this.vfxBtn.vfxState&&cc.audioEngine.playEffect(this.tap_sfx,!1),this.disappear(this.pause_board),this.isPausing=!1,this.changeStateOverLay()},t.prototype.changeStateOverLay=function(){var e=this;200===this.overLay.opacity?cc.tween(this.overLay).to(.1,{opacity:0}).call(function(){e.overLay.active=!1}).start():(this.overLay.active=!0,cc.tween(this.overLay).to(.1,{opacity:200}).start())},t.prototype.saveDataToFireBase=function(){f.default.getInstance().isHasTiniApp()&&this.score>=this.bestScore&&l.default.getInstance().setPlayerData(this.userInfo.customerId,{bestScore:this.bestScore,ava:this.userInfo.avatar,name:this.userInfo.name})},t.prototype.renderRank=function(){var e=this;this.rankList.removeAllChildren(),l.default.getInstance().getLeaderboard(function(t){console.log(t);var n=-84;t.length>0&&(t.forEach(function(t){t.id==="user_"+e.userInfo.customerId&&(e.rankTable.getChildByName("your rank").getComponent(cc.Label).string="B\u1ea1n \u0111ang x\u1ebfp th\u1ee9 "+t.rank);var i=cc.instantiate(e.userRankPrefab);i.getChildByName("rank").getComponent(cc.Label).string=t.rank,i.getChildByName("username").getComponent(cc.Label).string=t.name,i.getChildByName("user-best-score").getComponent(cc.Label).string="\u0110i\u1ec3m: "+t.bestScore,i.parent=e.rankList,i.setPosition(0,n),n-=160}),e.rankList.height+=800)})},t.prototype.onClickInviteFriendBtn=function(){console.log("Invite friend")},t.prototype.onClickShareBtn=function(){console.log("Share game")},t.prototype.caculatorScore=function(e,t){var n=0;function i(e,t){for(var n=0;n<t;n++)e*=2;return e}switch(e){case 3:n=i(6,t-1);break;case 4:n=i(7,t-1);break;case 5:n=i(10,t-1);break;default:n=i(15,t-1)}return n},t.prototype.countDuplicateItem=function(e){var t,n,i=0;if(e.length>2)for(var r=0;r<=e.length;r++)for(var o=r+1;o<=e.length;o++)(null===(t=e[r])||void 0===t?void 0:t.uuid)===(null===(n=e[o])||void 0===n?void 0:n.uuid)&&i++;return i},t.prototype.update=function(){},t.prototype.logScore=function(e){p.GameAnalytics.addProgressionEvent(g.EGAProgressionStatus.Complete,"Score"+e)},t.prototype.logFailed=function(e){p.GameAnalytics.addProgressionEvent(g.EGAProgressionStatus.Fail,"Score"+e)},o([b(cc.Node)],t.prototype,"board",void 0),o([b(cc.Node)],t.prototype,"newNumberHolder",void 0),o([b(cc.Node)],t.prototype,"block",void 0),o([b(cc.Node)],t.prototype,"canvasNode",void 0),o([b(cc.Node)],t.prototype,"boom_anim",void 0),o([b(cc.Node)],t.prototype,"pause_board",void 0),o([b(cc.Node)],t.prototype,"gameOverPNG",void 0),o([b(cc.Node)],t.prototype,"screen",void 0),o([b(cc.Prefab)],t.prototype,"number",void 0),o([b(cc.Prefab)],t.prototype,"hammerPrefab",void 0),o([b(cc.Prefab)],t.prototype,"flyingScore",void 0),o([b([cc.Node])],t.prototype,"squareNodeArr",void 0),o([b(cc.Label)],t.prototype,"scoreText",void 0),o([b(cc.Label)],t.prototype,"bestScoreText",void 0),o([b([cc.AudioClip])],t.prototype,"success_sfx",void 0),o([b(cc.AudioClip)],t.prototype,"place_sfx",void 0),o([b(cc.AudioClip)],t.prototype,"place_wrong_sfx",void 0),o([b(cc.AudioClip)],t.prototype,"tap_sfx",void 0),o([b(cc.AudioClip)],t.prototype,"gameover_sfx",void 0),o([b(cc.Node)],t.prototype,"rankTable",void 0),o([b(cc.Node)],t.prototype,"overLay",void 0),o([b(cc.Prefab)],t.prototype,"userRankPrefab",void 0),o([b(cc.Node)],t.prototype,"rankList",void 0),o([b(cc.Node)],t.prototype,"pauseBtn",void 0),o([b(d.default)],t.prototype,"musicBtn",void 0),o([b(u.default)],t.prototype,"vfxBtn",void 0),o([b(cc.Node)],t.prototype,"rankBtn",void 0),o([b(cc.Node)],t.prototype,"guideBoard",void 0),o([b(cc.Node)],t.prototype,"guideAnim",void 0),o([b(cc.Node)],t.prototype,"guideArrow",void 0),o([y],t)}(cc.Component);n.default=A,cc._RF.pop()},{"./AudioController":"AudioController","./FirebaseManager":"FirebaseManager","./GuideController":"GuideController","./MusicController":"MusicController","./NumberController":"NumberController","./SquareController":"SquareController","./TiniController":"TiniController",gameanalytics:1}],GuideController:[function(e,t,n){"use strict";cc._RF.push(t,"996959GWMNIGJnzqf51Skn2","GuideController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./TiniController"),s=cc._decorator,c=s.ccclass,l=(s.property,cc.tween),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guideLevel=0,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e){var t=this;this.gameScene=e,a.default.getInstance().isHasTiniApp()?a.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"isNewBie"}},function(e){void 0===e.res.data?(t._isNewBie=!0,a.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"isNewBie",data:!0}},function(){console.log("Set is new bie done")})):t._isNewBie=e.res.data,t.startGuide(),console.log("Onload is newbie",t._isNewBie)}):(cc.sys.localStorage.getItem("isNewBie")?this._isNewBie="true"===cc.sys.localStorage.getItem("isNewBie"):(cc.sys.localStorage.setItem("isNewBie",!0),this._isNewBie=!0),this.startGuide())},t.prototype.startGuide=function(){console.log("Check newbiew",this._isNewBie),this._isNewBie?(this.gameScene.pauseBtn.active=!1,this.gameScene.rankBtn.active=!1):(this.gameScene.guideBoard.active=!1,this.gameScene.guideAnim.active=!1)},t.prototype.loadGuide=function(){this.gameScene.clearTable(),this.gameScene.score=0,this.createPieceToBoard(2,13),this.createPieceToBoard(4,14),this.createPieceToBoard(2,12),this.createPieceToBoard(6,8),this.createPieceToBoard(3,4),this.setPieceBlock()},t.prototype.increaseGuideLevel=function(){this.guideLevel++},t.prototype.finishGuide=function(){a.default.getInstance().isHasTiniApp()?a.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"isNewBie",data:!1}}):cc.sys.localStorage.setItem("isNewBie",!1),this._isNewBie=!1,this.gameScene.guideAnim.active=!1,this.gameScene.guideBoard.active=!1,this.gameScene.pauseBtn.active=!0,this.gameScene.rankBtn.active=!0},t.prototype.createPieceToBoard=function(e,t){var n=cc.instantiate(this.gameScene.number).getComponent("NumberController");n.node.scale=.1,n.node.setParent(this.gameScene.board),n.value=e,n.updateText();var i=t,r=this.gameScene.squareArr[i].node;n.node.setPosition(r.position),this.gameScene.squareArr[i].placedNumber=n,n.stackingSquare=this.gameScene.squareArr[i],l(n.node).to(.1,{scale:1}).start()},t.prototype.createPieceToBlock=function(e){var t=this;e.forEach(function(n,i){var r=cc.instantiate(t.gameScene.number).getComponent("NumberController");r.node.scale=.1,r.node.setParent(t.gameScene.block),r.value=n,r.updateText(),e.length>1?0===i?r.node.setPosition(t.gameScene.block.position.x-t.gameScene.gapX/2,t.gameScene.block.position.y):r.node.setPosition(t.gameScene.block.position.x+t.gameScene.gapX/2,t.gameScene.block.position.y):r.node.setPosition(t.gameScene.block.position),l(r.node).to(.1,{scale:1}).start(),t.gameScene.newNumberArr.push(r)}),this.gameScene.typeOfNewBlock=e.length,this.gameScene.isCombing=!1},t.prototype.setPieceBlock=function(){switch(this.gameScene.isPlaying=!0,this.gameScene.hexaMap=[],this.gameScene.updateScore(),this.gameScene.newNumberArr=[],this.gameScene.block.setPosition(cc.v3(0,0,0)),this.gameScene.block.angle=0,this.guideLevel){case 1:this.createPieceToBlock([2]);break;case 2:this.createPieceToBlock([3,4])}this.gameScene.newNumberArr.sort(function(e,t){return e.value==t.value?0:e.value>t.value?1:e.value<t.value?-1:void 0}),this.gameScene.storeGameData(),this.playAnimGuide(),this.setTextGuide()},t.prototype.playAnimGuide=function(){console.log("play anim guide"),this.gameScene.guideAnim.getComponent(cc.Animation).play("guide"+this.guideLevel)},t.prototype.setTextGuide=function(){var e=this.gameScene.guideBoard.getChildByName("text guide").getChildByName("title").getComponent(cc.Label),t=this.gameScene.guideBoard.getChildByName("text guide").getChildByName("desc").getComponent(cc.Label);switch(this.guideLevel){case 1:e.string="Xin ch\xe0o, h\xe3y ch\u01a1i Hexa",t.string="K\xe9o v\xe0 th\u1ea3 c\xe1c m\u1ea3nh l\xean b\u1ea3ng \n \u0111\u1ec3 h\u1ee3p nh\u1ea5t c\xe1c m\u1ea3nh gi\u1ed1ng nhau";break;case 2:e.string="T\u1ed1t l\u1eafm !!!",t.string="B\u1ea1n c\xf3 th\u1ec3 thay \u0111\u1ed5i h\xecnh d\u1ea1ng c\u1ee7a hai m\u1ea3nh \n b\u1eb1ng c\xe1ch nh\u1ea5p v\xe0o n\xf3",this.gameScene.guideArrow.opacity=255,this.gameScene.guideArrow.getComponent(cc.Animation).play()}},o([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./TiniController":"TiniController"}],MusicController:[function(e,t,n){"use strict";cc._RF.push(t,"7d748TDmV9Oo6NZbwoLODe6","MusicController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicState=!0,t.gameScene=null,t.sprite=[],t}return r(t,e),t.prototype.init=function(e){this.gameScene=e},t.prototype.start=function(){},t.prototype.onClickMusicBtn=function(){this.musicState?(this.musicState=!1,this.gameScene.getComponent(cc.AudioSource).volume=0,this.getComponent(cc.Sprite).spriteFrame=this.sprite[0]):(this.musicState=!0,this.gameScene.getComponent(cc.AudioSource).volume=.3,this.getComponent(cc.Sprite).spriteFrame=this.sprite[1])},o([c(cc.SpriteFrame)],t.prototype,"sprite",void 0),o([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],NumberController:[function(e,t,n){"use strict";cc._RF.push(t,"edf4b4j4kxDjZg6Tc8L3hfH","NumberController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./SquareController"),s=e("./NumberController"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text=null,t.spriteList=[],t.stackingSquare=null,t}return r(t,e),t.prototype.onLoad=function(){this.value=1,cc.director.getCollisionManager().enabled=!0},t.prototype.onCollisionEnter=function(e,t){if(0==e.tag){var n=e.getComponent(a.default),i=t.getComponent(s.default);null==n.placedNumber?i.stackingSquare=n:-1==t.getComponent(s.default).value&&(console.log("TAKE STACKING SQUARE!!!!"),i.stackingSquare=n)}},t.prototype.onCollisionExit=function(e,t){var n=e.getComponent(a.default),i=t.getComponent(s.default);0==e.tag&&n==i.stackingSquare&&(i.stackingSquare=null)},t.prototype.updateText=function(){var e=this.getComponent(cc.Sprite);-1!=this.value?e.spriteFrame=this.spriteList[this.value-1]:e.spriteFrame=this.spriteList[this.spriteList.length-1]},o([u(cc.Label)],t.prototype,"text",void 0),o([u([cc.SpriteFrame])],t.prototype,"spriteList",void 0),o([l],t)}(cc.Component);n.default=d,cc._RF.pop()},{"./NumberController":"NumberController","./SquareController":"SquareController"}],SquareController:[function(e,t,n){"use strict";cc._RF.push(t,"c61690bQ7NAkpOP0il93k1R","SquareController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=cc.tween,u=e("./NumberController"),d=e("./SquareController"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.linkedSquareList=[],t.linkedSquareNodeList=[],t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0;for(var e=0;e<this.linkedSquareNodeList.length;++e)this.linkedSquareList.push(this.linkedSquareNodeList[e].getComponent(d.default));this.index<3?this.row=1:this.index<7?this.row=2:this.index<12?this.row=3:this.index<16?this.row=4:this.index<19&&(this.row=5)},t.prototype.onCollisionEnter=function(e,t){var n=t.getComponent(d.default),i=e.getComponent(u.default);1==e.tag&&(null==n.placedNumber?(n.stackingNumber=i,l(this.node).to(.2,{opacity:20}).start(),-1==i.value&&n.linkedSquareList.forEach(function(e){null!=e.placedNumber&&l(e.placedNumber.node).to(.2,{opacity:20}).start()})):-1==i.value&&(n.stackingNumber=i,l(n.placedNumber.node).to(.2,{opacity:20}).start(),l(n.node).to(.2,{opacity:20}).start(),n.linkedSquareList.forEach(function(e){null!=e.placedNumber&&l(e.placedNumber.node).to(.2,{opacity:20}).start()})))},t.prototype.onCollisionExit=function(e,t){var n=t.getComponent(d.default),i=e.getComponent(u.default);1==e.tag&&n.stackingNumber==i&&(-1!=i.value?(n.stackingNumber=null,l(n.node).to(.2,{opacity:150}).start()):-1==i.value&&(null!=n.placedNumber?l(n.placedNumber.node).to(.2,{opacity:255}).start():l(n.node).to(.2,{opacity:150}).start(),n.linkedSquareList.forEach(function(e){null!=e.placedNumber&&l(e.placedNumber.node).to(.2,{opacity:255}).start()}),n.stackingNumber=n.placedNumber))},o([c([n])],t.prototype,"linkedSquareList",void 0),o([c([cc.Node])],t.prototype,"linkedSquareNodeList",void 0),o([s],t)}(cc.Component);n.default=f,cc._RF.pop()},{"./NumberController":"NumberController","./SquareController":"SquareController"}],TiniController:[function(e,t,n){"use strict";cc._RF.push(t,"96ee1qs/ABCaqpSoHeLRhGK","TiniController");var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=e("uuid"),o=cc._decorator,a=o.ccclass,s=(o.property,function(){function e(){this.callbacks={}}var t;return t=e,e.getInstance=function(){return t._instance?t._instance:(t._instance=new t,t._instance)},e.prototype.init=function(e){var t=this;this.gameScene=e,window.addEventListener("message",function(e){var n=e.data,i=n.requestId,r=n.result;if(void 0!==t.callbacks[i]){var o=t.callbacks[i];delete t.callbacks[i],o(r)}})},e.prototype.sendMessageToTiniApp=function(e,t){var n=r.v4();this.callbacks[n]=t,my.postMessage({requestId:n,params:e})},e.prototype.isHasTiniApp=function(){try{return my}catch(e){}},e.prototype.getPlayerInfo=function(){var e=this;return new Promise(function(t){e.sendMessageToTiniApp({api:"getUserInfo"},function(e){t(e.res)})})},e.prototype.start=function(){},e._instance=null,t=i([a],e)}());n.default=s,cc._RF.pop()},{uuid:2}]},{},["Analytics","AudioController","CanvasController","CombineAnimation","FirebaseManager","GameController","GuideController","MusicController","NumberController","SquareController","TiniController"]);